function selectChage(){$("#myform\\:batchNo").each(function(){$.autosizeElement(this,!0)})}function querybtn(){document.getElementById("myform:btn_search").click()}function resizeTable(){var a=0;$(".table-body").css({top:a+"px",height:$(".zl-content-info").height()-a+"px"}),$(".table-body").hasClass("mCustomScrollbar")?$(".table-body").mCustomScrollbar("update"):$(".table-body").mCustomScrollbar({theme:"dark",scrollInertia:0,scrollbarPosition:"inside",autoHideScrollbar:!0}).find(".mCSB_container").css({marginRight:0})}function loadAjaxData(){$.ajax({url:"./productInProgress/getReportData.action",dataType:"json",success:function(a){var b=a;$("#divtab2").html(drawTable(b))},complete:function(){loadClickEvent()}})}function drawTable(a){for(var b="",c="<div class='ui-datatable ui-treetable ui-widget' style='margin-top: 6px;'><table id='detail_table' class='detail' border='0' cellspacing='0' cellpadding='0' width='100%'><thead><tr><th class='ui-state-default' width='6%'>&nbsp;</th><th class='ui-state-default' width='22%'>&nbsp;</th><th class='ui-state-default' width='15%'>&nbsp;</th><th class='ui-state-default' width='15%'>&nbsp;</th><th class='ui-state-default' width='7%'>&nbsp;</th><th class='ui-state-default' width='7%'>&nbsp;</th><th class='ui-state-default' width='7%'>&nbsp;</th><th class='ui-state-default' width='7%'>&nbsp;</th><th class='ui-state-default' width='7%'>&nbsp;</th><th class='ui-state-default' width='7%'>&nbsp;</th></tr></thead><tbody id='tbody' class='ui-treetable-data ui-widget-content'>",d=a.data,e=d.length,f=0,g=0;e>g;g++){var h=d[g];""!=h.partName&&(g>0?(h.partName==d[g-1].partName?h.taskNum!=d[g-1].taskNum?(f=g,start="<tr class='parent ui-widget-content default' id='row"+g+"' title='点击这里展开/关闭' style='cursor: pointer;'><td style='width:6%;word-break: break-all;'><div class='ui-tt-c'>+/-</div></td>",part="<td style='vertical-align:top;border-top: none; border-bottom: none;'><div class='ui-tt-c'>&nbsp;</div></td>"):(start="<tr class='child-row"+f+" ui-widget-content default' style='display: none;'><td style='border-top: none; border-bottom: none;'><div class='ui-tt-c'></div></td>",part="<td style='vertical-align:top;border:none;'><div class='ui-tt-c'>&nbsp;</div></td>"):(f=g,start="<tr class='parent ui-widget-content default' id='row"+g+"' title='点击这里展开/关闭' style='cursor: pointer;'><td style='width:6%;word-break: break-all;'><div class='ui-tt-c'>+/-</div></td>",part="<td style='vertical-align:top;width:22%;word-break: break-all;'><div class='ui-tt-c'>"+h.partName+"</div></td>"),taskNum=h.taskNum==d[g-1].taskNum?"<td style='border-top: none; border-bottom: none;'><div class='ui-tt-c'>&nbsp;</div></td>":"<td style='width:15%;word-break: break-all;'><div class='ui-tt-c'>"+h.taskNum+"</div></td>",h.processName==d[g-1].processName?(process="<td style='border-top: none; border-bottom: none;'><div class='ui-tt-c'>&nbsp;</div></td>",planNum="<td style='border-top: none; border-bottom: none;'><div class='ui-tt-c'>&nbsp;</div></td>",finish="<td style='border-top: none; border-bottom: none;'><div class='ui-tt-c'>&nbsp;</dvi></td>"):(process="<td><div class='ui-tt-c'>"+h.processName+"</div></td>",planNum="<td><div class='ui-tt-c'>"+h.planNum+"</div></td>",finish="<td><div class='ui-tt-c'>"+h.finishNum+"</div></td>")):(start="<tr class='parent ui-widget-content default' id='row"+g+"' style='cursor: pointer;'><td style='width:6%;word-break: break-all;'><div class='ui-tt-c'>+/-</div></td>",part="<td style='vertical-align:top;width:22%;word-break: break-all;'><div class='ui-tt-c'>"+h.partName+"</div></td>",taskNum="<td style='width:15%;word-break: break-all;'><div class='ui-tt-c'>"+h.taskNum+"</div></td>",process="<td style='width:15%;word-break: break-all;'><div class='ui-tt-c'>"+h.processName+"</div></td>",planNum="<td style='width:7%;word-break: break-all;'><div class='ui-tt-c'>"+h.planNum+"</div></td>",finish="<td style='width:7%;word-break: break-all;'><div class='ui-tt-c'>"+h.finishNum+"</div></td>"),end="<td style='width:7%;word-break: break-all;'><div class='ui-tt-c'>"+h.equSerialNo+"</div></td><td style='width:7%;word-break: break-all;'><div class='ui-tt-c'></div></td><td style='width:7%;word-break: break-all;'><div class='ui-tt-c'></div></td>",workInNum=""==h.processName?"<td style='width:7%;word-break: break-all;'><div class='ui-tt-c'>"+h.workInNum+"</div></td>":"<td style='width:7%;word-break: break-all;'><div class='ui-tt-c'>/</div></td>",trend="</tr>",b+=start+part+taskNum+process+planNum+finish+end+workInNum+trend)}var i=b,j="</tbody></table></div>";return c+i+j}function loadClickEvent(){$("tr.parent").css("cursor","pointer").attr("title","点击这里展开/关闭").click(function(){$(this).siblings(".child-"+this.id).toggle("normal",function(){$(".table-body").mCustomScrollbar("update")})})}function updateScroll(){$(".table-body").mCustomScrollbar("update")}function sub(a){"tab1"==a?(document.getElementById("myform:loadtab").value="tab1",document.getElementById("tab2").style.display="none",document.getElementById("tab3").style.display="none",document.getElementById("myform:group").disabled=!0,document.getElementById("ctx_group").style.visibility="hidden"):(document.getElementById("myform:loadtab").value="tab2",document.getElementById("tab2").style.display="block",document.getElementById("tab3").style.display="block",document.getElementById("myform:group").value=1,document.getElementById("myform:group").disabled=!1,document.getElementById("ctx_group").style.visibility="visible",loadAjaxData()),document.getElementById("myform:submt").click()}function getData(a){$.ajax({url:"./productInProgress/getDataByproductName.action",type:"post",data:{partName:a},dataType:"json",success:function(a){var b=a;$("#divtab2").html(drawTable(b))},complete:function(){loadClickEvent()}})}function change(){var a=(document.getElementById("myform:loadtab").value,document.getElementById("myform:group").value);if(1==a){document.getElementById("tab3").style.display="none",document.getElementById("tab2").style.display="block";var b=document.getElementById("myform:startTimeInputDate").value,c=document.getElementById("myform:finishTimeInputDate").value,d=document.getElementById("myform:productName").value,e=document.getElementById("myform:batchNo").value;$.ajax({url:"./productInProgress/getReportData.action",data:{descParam:"",startTime:b,endTime:c,partName:d,batchNo:e},dataType:"json",success:function(a){var b=a;$("#divtab2").html(drawTable(b))},complete:function(){loadClickEvent()}})}else document.getElementById("tab2").style.display="none",document.getElementById("tab3").style.display="block",$.ajax({url:"./productInProgress/getReportData.action",data:{descParam:"",startTime:b,endTime:c,partName:d,batchNo:e},data:{descParam:"equ_job.equSerialNo"},dataType:"json",contentType:"application/json;charset=utf-8",success:function(a){var b=a;$("#divtab3").html(drawTable1(b))},complete:function(){loadClickEvent()}})}function drawTable1(a){for(var b="",c="<div class='ui-datatable ui-treetable ui-widget' style='margin-top: 6px;'><table id='detail_table_equ' class='detail' border='0' cellspacing='0' cellpadding='0' width='100%'><thead><tr><th class='ui-state-default' width='6%'>&nbsp;</th><th class='ui-state-default' width='22%'>&nbsp;</th><th class='ui-state-default' width='17%'>&nbsp;</th><th class='ui-state-default' width='15%'>&nbsp;</th><th class='ui-state-default' width='10%'>&nbsp;</th><th class='ui-state-default' width='10%'>&nbsp;</th><th class='ui-state-default' width='10%'>&nbsp;</th><th class='ui-state-default' width='10%'>&nbsp;</th></tr></thead><tbody id='tbody' class='ui-treetable-data ui-widget-content'>",d=a.data,e=d.length,f=0,g=0;e>g;g++){var h=d[g];g>0?(h.equSerialNo==d[g-1].equSerialNo?(start="<tr class='child-row"+f+" ui-widget-content default' style='display: none;'><td style='border-top: none; border-bottom: none;'><div class='ui-tt-c'></div></td>",equSerialNo="<td style='vertical-align:top;border-top: none; border-bottom: none;'><div class='ui-tt-c'>&nbsp;</div></td>"):(f=g,start="<tr class='parent ui-widget-content default' id='row"+g+"' title='点击这里展开/关闭' style='cursor: pointer;'><td style='width:6%;word-break: break-all;'><div class='ui-tt-c'>+/-</div></td>",equSerialNo="<td style='vertical-align:top;'><div class='ui-tt-c'>"+h.equSerialNo+"</div></td>"),part=h.partName==d[g-1].partName&&h.equSerialNo==d[g-1].equSerialNo?"<td style='border-top: none; border-bottom: none;'><div class='ui-tt-c'>&nbsp;</div></td>":"<td><div class='ui-tt-c'>"+h.partName+"</div></td>",h.equSerialNo==d[g-1].equSerialNo&&h.partName==d[g-1].partName&&h.processName==d[g-1].processName?(processName="<td style='border-top: none; border-bottom: none;'><div class='ui-tt-c'>&nbsp;</div></td>",plan_finish="<td style='border-top: none; border-bottom: none;'><div class='ui-tt-c'>&nbsp;</div></td><td style='border-top: none; border-bottom: none;'><div class='ui-tt-c'>&nbsp;</div></td>"):(processName="<td><div class='ui-tt-c'>"+h.processName+"</div></td>",plan_finish="<td><div class='ui-tt-c'>"+h.planNum+"</div></td>  <td><div class='ui-tt-c'>"+h.finishNum+"</div></td>")):(f=g,start="<tr class='parent ui-widget-content default' id='row"+g+"' title='点击这里展开/关闭' style='cursor: pointer;'><td style='width:6%;word-break: break-all;'><div class='ui-tt-c'>+/-</div></td>",equSerialNo="<td style='width:22%;word-break: break-all;'><div class='ui-tt-c'>"+h.equSerialNo+"</div></td>",part="	<td style='width:17%;word-break: break-all;'><div class='ui-tt-c'>"+h.partName+"</div></td>",processName="<td style='width:15%;word-break: break-all;'><div class='ui-tt-c'>"+h.processName+"</div></td>",plan_finish="<td style='width:10%;word-break: break-all;'><div class='ui-tt-c'>"+h.planNum+"</div></td><td style='width:10%;word-break: break-all;'><div class='ui-tt-c'>"+h.finishNum+"</div></td>"),end="<td style='width:10%;word-break: break-all;'><div class='ui-tt-c'></div></td><td style='width:10%;word-break: break-all;'><div class='ui-tt-c'></div></td></tr>",b+=start+equSerialNo+part+processName+plan_finish+end}var i=b,j="</tbody></table></div>";return c+i+j}$(document).ready(function(){$.autosizeExclude($(".table-title")[0],!0),$.autosizeExclude($(".table-body>div")[0],!0),$.autosizeFrame(!1),$("option").attr("data-i18n",function(){return $(this).text()}),dataTranslate("product_in_progress_composite",function(){$("*[data-i18n]").i18n()}),$.autosizeReturn(resizeTable)}),searchBtn();