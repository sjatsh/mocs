<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui" 
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:f="http://java.sun.com/jsf/core">
<h:form id="myform">
<h:outputScript library="js" name="stat_device_oee.js"></h:outputScript>
<h:inputHidden id="nodeStr" value="#{StatDeviceOEEBean.nodeStr}" />
<h:outputScript library="js" name="highcharts.js"></h:outputScript>
<h:outputScript library="js" name="exporting.js"></h:outputScript>
<link rel="stylesheet" href="css/common.css" type="text/css"></link>
<link rel="stylesheet" href="css/stat.css" type="text/css"></link>
<style type="text/css">
*{margin:0px;}
</style>

<link rel="stylesheet" href="css/stat_device_oee.css" type="text/css"></link>

<div class="title-bar">
	<div class="logo-img">
		<img src="images/profile_top_logo.png" />
	</div>
	<div class="title-text">OEE分析</div>
	<div class="filter-frame">
		<div class="filter-bar">
			<div class="filter-label">设备名称:</div>
			<div class="filter-input">
				<h:selectOneMenu id="equSerialNo" value="#{StatDeviceOEEBean.equSerialNo}" styleClass="filter-select" >
					<f:selectItems value="#{StatDeviceOEEBean.nameList}"></f:selectItems>
				</h:selectOneMenu>
			</div>
		</div>
		<div class="filter-bar">
			<div class="filter-label">开始时间:</div>
			<div class="filter-input">
				<rich:calendar id="start" tabindex="3" popup="true" inputClass="inputText" locale="en" value="#{StatDeviceOEEBean.start}" cellWidth="10px" cellHeight="20px" datePattern="yyyy-MM-dd" />
			</div>
		</div>
		<div class="filter-bar">
			<div class="filter-label">结束时间:</div>
			<div class="filter-input">
				<rich:calendar id="end"   tabindex="3"  popup="true" inputClass="inputText"	locale="en" value="#{StatDeviceOEEBean.end}" cellWidth="10px" cellHeight="20px" datePattern="yyyy-MM-dd" />
			</div>
		</div>
	</div>
	<div class="filter-submit">
		<h:graphicImage id="btn_search" alt="search" url="images/jobplan/list/jobpaln_button.png">
			<a4j:ajax event="click" listener="#{StatDeviceOEEBean.selectBeanOEE}" render=":myform:rightiframe :myform:rightiframe1" execute="equSerialNo start end"></a4j:ajax>
		</h:graphicImage>
	</div>
</div>
<script language="javascript">
	$(".title-bar").css("width", wjb51 + "px").css("height", hjb51 * 280 / 1080 + "px");
	$(".logo-img").css("left", wjb51 * 25 / 1920 + "px").css("top", hjb51 * 33 / 1080 + "px").css("width", wjb51 * 229 / 1920 + "px").css("height", hjb51 * 180 / 1080 + "px");
	$(".title-text").css("left", wjb51 * 500 / 1920 + "px").css("top", hjb51 * 100 / 1080 + "px").css("font-size", hjb51 * 52 / 1080 + "px").css("line-height", hjb51 * 52 / 1080 + "px");
	$(".filter-frame").css("left", wjb51 * 968 / 1920 + "px").css("top", hjb51 * 10 / 1080 + "px");
	$(".filter-bar").css("width", wjb51 * 484 / 1920 + "px").css("height", hjb51 * 42 / 1080 + "px").css("margin-top", hjb51 * 30 / 1080 + "px");
	$(".filter-label").css("line-height", hjb51 * 42 / 1080 + "px").css("font-size", hjb51 * 38 / 1080 + "px");
	$(".filter-input").css("width", wjb51 * 246 / 1920 + "px").css("height", hjb51 * 42 / 1080 + "px").css("line-height", hjb51 * 42 / 1080 + "px").css("font-size", hjb51 * 20 / 1080 + "px");
	$(".filter-input img.rf-cal-btn").css("margin-left", -wjb51 * 45 / 1920 + "px").css("width", wjb51 * 42 / 1920 + "px").css("height", hjb51 * 42 / 1080 + "px");
	$(".filter-input .rf-cal-extr").css("width", wjb51 * 246 / 1920 + "px");
	$(".filter-submit").css("left", wjb51 * 1613 / 1920 + "px").css("top", hjb51 * 47 / 1080 + "px").css("width", wjb51 * 164 / 1920 + "px").css("height", hjb51 * 164 / 1080 + "px");
</script>
<div class="content-frame">
	<div class="tab-bar">
		<div id="tab-list" class="tab-btn active">列表</div>
		<div id="tab-chart" class="tab-btn">图表</div>
	</div>
	<div id="list-frame">
		<h:panelGroup id="rightiframe1">
			<table style="width: 90%;height: 100%; margin: 0 auto;" border="0" cellpadding="0" cellspacing="0">
				<tr style="height: 20%;">
					<td style="width: 13%; background-color: #cccccc;"><h:outputText value="实际运行时间：" /></td>
					<td style="width: 20%"><h:outputText value="#{StatDeviceOEEBean.map.worktimeFacta}" /></td>
					<td style="width: 13%; background-color: #cccccc;"><h:outputText value="可用率：" /></td>
					<td style="width: 20%"><h:outputText value="#{StatDeviceOEEBean.map.availability}" /></td>
					<td style="width: 14%; background-color: #cccccc;"><h:outputText value="合格产量：" /></td>
					<td style="width: 20%;"><h:outputText value="#{StatDeviceOEEBean.map.qualifiedPartCount}" /></td>
				</tr>
				<tr style="height: 20%;">
					<td style="background-color: #cccccc;"><h:outputText value="计划运行时间：" /></td>
					<td><h:outputText value="#{StatDeviceOEEBean.map.worktimePlana}" /></td>
					<td style="background-color: #cccccc;"><h:outputText value="设备利用率：" /></td>
					<td><h:outputText value="#{StatDeviceOEEBean.map.ratio}" /></td>
					<td style="background-color: #cccccc;"><h:outputText value="实际产量：" /></td>
					<td><h:outputText value="#{StatDeviceOEEBean.map.processPartsCount}" /></td>
				</tr>
				<tr style="height: 20%;">
					<td style="background-color: #cccccc;"><h:outputText value="实际产量理论耗时：" /></td>
					<td><h:outputText value="#{StatDeviceOEEBean.map.acturalOutputTheorytimea}" /></td>
					<td style="background-color: #cccccc;"><h:outputText value="质量指数：" /></td>
					<td><h:outputText value="#{StatDeviceOEEBean.map.quality}" /></td>
					<td style="background-color: #cccccc;"><h:outputText value="OEE：" /></td>
					<td style="border-right:0"><h:outputText value="#{StatDeviceOEEBean.map.dayOeevaluea}" /></td>
				</tr>
				<tr style="height: 20%;">
					<td style="background-color: #cccccc;"><h:outputText value="总时长：" /></td>
					<td><h:outputText value="#{StatDeviceOEEBean.map.totalTimea}" /></td>
					<td style="background-color: #cccccc;"><h:outputText value="表现性：" /></td>
					<td><h:outputText value="#{StatDeviceOEEBean.map.display}" /></td>
					<td style="background-color: #cccccc;"><h:outputText value="TEEP：" /></td>
					<td><h:outputText value="#{StatDeviceOEEBean.map.dayTeepvaluea}" /></td>
				</tr>
				<tr style="height: 20%;">
					<td style="background-color: #cccccc;"><h:outputText value="" /></td>
					<td><h:outputText value="" /></td>
					<td style="background-color: #cccccc;"><h:outputText value="" /></td>
					<td><h:outputText value="" /></td>
					<td style="background-color: #cccccc;"><h:outputText value="" /></td>
					<td><h:outputText value="" /></td>
				</tr>
			</table>
		</h:panelGroup>
	</div>
	<div id="chart-frame">
		<h:panelGroup id="rightiframe"> 
			<h:inputHidden value="#{StatDeviceOEEBean.jsonData}" id="beanvalue" />
			<div id="highchartChart"  style="height: 100%"/>
			<script type="text/javascript">
				loadData();
			</script>
		</h:panelGroup>	
	</div>
</div>
<script language="javascript">
	$(".content-frame").css("width", wjb51 + "px").css("height", hjb51 * 711 / 1080 + "px");
	$(".tab-bar").css("height", hjb51 * 56 / 1080 + "px");
	$(".tab-btn").css("width", wjb51 * 168 / 1920 + "px").css("font-size", hjb51 * 30 / 1080 + "px").css("line-height", hjb51 * 56 / 1080 + "px");
	$("#list-frame").css("top", hjb51 * 60 / 1080 + "px").css("width", wjb51 + "px").css("height", hjb51 * 656 / 1080 + "px").css("font-size", hjb51 * 30 / 1080 + "px");
	$("#chart-frame").css("left", wjb51 * 168 / 1920 + "px").css("top", "0px").css("width", wjb51 * 168 / 1920 + "px").css("height", hjb51 * 56 / 1080 + "px");
	//$("#chart-frame").css("top", hjb51 * 56 / 1080 + "px").css("width", wjb51 + "px").css("height", hjb51 * 544 / 1080 + "px").css("display", "none");
	
	var smallWidth = wjb51 * 168 / 1920;
	var smallHeight = hjb51 * 56 / 1080;
	var bigTop = hjb51 * 60 / 1080;
	var bigWidth = wjb51;
	var bigHeight = hjb51 * 656 / 1080;
	$("#tab-list").click(function() {
		if($("#tab-list").attr("class") == "tab-btn active") {return;}
		
		$("#tab-list").addClass("active");
		$("#tab-chart").removeClass("active");
	
		$("#list-frame").animate({width: bigWidth + "px", height: bigHeight + "px", left: "0px", top: bigTop + "px"}, 200);
		$("#chart-frame").animate({width: smallWidth + "px", height: smallHeight + "px", left: smallWidth + "px", top: "0px"}, 200);
	});
	$("#tab-chart").click(function() {
		if($("#tab-chart").attr("class") == "tab-btn active") {return;}
		
		$("#tab-list").removeClass("active");
		$("#tab-chart").addClass("active");
		
		$("#list-frame").animate({width: smallWidth + "px", height: smallHeight + "px", left: "0px", top: "0px"}, 200);
		$("#chart-frame").animate({width: bigWidth + "px", height: bigHeight + "px", left: "0px", top: bigTop + "px"}, 200);
	});
</script>

</h:form>
</ui:composition>