<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui">
<h:head>
<!-- <link href="../css/general.css" rel="stylesheet" type="text/css" />
<link rel="stylesheet" href="../css/autosize.css" type="text/css"></link>
<link href="../css/jobdispatch_add.css" rel="stylesheet" type="text/css" /> -->
<link rel="stylesheet" href="../css/publish/JobdispatchAdd.min.css" type="text/css"></link>

<script src="../js/publish/i18next-1.7.4.min.js.gzjs" type="text/javascript"></script>
<!-- <h:outputScript library="js" name="common.js"></h:outputScript>
<h:outputScript library="js" name="autosize.js"></h:outputScript>
<h:outputScript library="js/page" name="jobdispatch_add.js"></h:outputScript>
<h:outputScript library="js" name="jquery.alerts.js"></h:outputScript> -->
<h:outputScript library="js/publish" name="JobdispatchAdd.min.js"></h:outputScript>
</h:head>		
<h:body>
<h:form id="myform">
<div class="jobdispatch-add-in">
<h:inputHidden value="#{JobdispatchAdd.isSuccess}" id="isSuccess"/>
<div class="jobdispatch-add-tou">
    <img class="jobdispatch-add-image" src="../images/toubiaoti.png" />
    <div class="jobdispatch-add-title">
    <span data-i18n="top.title1"></span>
</div>
</div>
<img class="middle_xian" src="../images/middle.png"/>
     <div class="zhongjian_shuju">
        <div class="jobdispatch-content-label" >
       <span data-i18n="top.ljmc"></span>
        </div>
	       <div class="zl-selectInput jobdispatch-select-lt">
		   <img class="zl-selectInput-bg-left" src="../images/input/box_left.png" />
			<img class="zl-selectInput-bg-center" src="../images/input/box_center.png" />
			<img class="zl-selectInput-bg-right" src="../images/input/box_right_select.png" />
			<rich:autocomplete id="partTypeId" mode="client" minChars="-1" autofill="false" autocompleteMethod="#{JobdispatchAdd.complete}"
					value="#{JobdispatchAdd.partTypeId}" showButton="true" style="width: 188px;">
					<a4j:ajax event="selectitem" listener="#{JobdispatchAdd.searchList}" execute="partTypeId" render="myform:processResults :myform:car :myform:planjob" oncomplete="change()"></a4j:ajax>
			</rich:autocomplete>
				 <h:message for="partTypeId"></h:message>
			</div>
			<div class="jobdispatch-content-label" >
                 <span data-i18n="top.tlsl"></span>
           </div>
			<div class="zl-textbox zl-text jobdispatch-text-lt">
			<img class="zl-text-bg-left" src="../images/input/box_left.png" />
			<img class="zl-text-bg-center" src="../images/input/box_center.png" />
			<img class="zl-text-bg-right" src="../images/input/box_right.png" />
			<h:inputText id="num" value="#{JobdispatchAdd.num}" ></h:inputText>
			</div>
			<div class="jobdispatch-content-label" >
                <span data-i18n="top.pcmc"></span>
           </div>
			<div class="zl-textbox zl-text jobdispatch-text-lt">
			<img class="zl-text-bg-left" src="../images/input/box_left.png" />
			<img class="zl-text-bg-center" src="../images/input/box_center.png" />
			<img class="zl-text-bg-right" src="../images/input/box_right.png" />
			<h:inputText id="taskNum" value="#{JobdispatchAdd.taskNum}" ></h:inputText>
			</div>
      </div>
      <div class="zhongjian_shuju1">
      <div class="jobdispatch-content-label" >
        <span data-i18n="top.kssj"></span>
      </div>
    <div class="jobdispatch-content-select zl-dateBox">
	<img class="zl-dateBox-bg-left" src="../images/input/box_left.png" />
	<img class="zl-dateBox-bg-center" src="../images/input/box_center.png" />
	<img class="zl-dateBox-bg-right" src="../images/input/box_right_date.png" />
	<rich:calendar  id="startDate" inputClass="common_calendar" styleClass="common_condition_spacing" popup="true" locale="en"
				value="#{JobdispatchAdd.startDate}"  datePattern="yyyy-MM-dd" required="true"  />
	   <h:message for="startDate" style="color:red" />
	</div>
    <div class="jobdispatch-content-label" >
       <span data-i18n="top.jssj"></span>
      </div>
    <div class="jobdispatch-content-select zl-dateBox">
	<img class="zl-dateBox-bg-left" src="../images/input/box_left.png" />
	<img class="zl-dateBox-bg-center" src="../images/input/box_center.png" />
	<img class="zl-dateBox-bg-right" src="../images/input/box_right_date.png" />
	<rich:calendar  id="endDate" inputClass="common_calendar" styleClass="common_condition_spacing" popup="true" locale="en"
				value="#{JobdispatchAdd.endDate}"  datePattern="yyyy-MM-dd" required="true"  />
	   <h:message for="endDate" style="color:red" />
	</div>  
    <div class="jobdispatch-content-label" >
        <span data-i18n="top.pch"></span>
        </div>
	     <div class="zl-select jobdispatch-select-lt">
			<img class="zl-select-bg-left" src="../images/input/box_left.png" />
			<img class="zl-select-bg-center" src="../images/input/box_center.png" />
			<img class="zl-select-bg-right" src="../images/input/box_right_select.png" />
			<h:selectOneMenu id="planjob" value="#{JobdispatchAdd.planjobId}" >
					<f:selectItems value="#{JobdispatchAdd.planjobMap}"></f:selectItems>
					<a4j:ajax listener="#{JobdispatchAdd.autoComplete}" execute="planjob" event="change" render=":myform:num :myform:taskNum" oncomplete="changeDisabled()"></a4j:ajax>
				</h:selectOneMenu>
			</div>  
     </div>
     <div class="zl-xiaobiaoti">
      <div class="jobdispatch-content-input"> 
         <span data-i18n="top.gyqd" ></span>
      </div>
      </div>
      <div class="zl-xiaobiaoti1">
        <div class="jobdispatch-content-input"> 
         <span data-i18n="top.gdlb" ></span>
       </div>
       </div>
      <div class="jobdispatch-content-info">
      <div class="jobdispatch-content-info-tubiao">
       <p:dataTable id="processResults" var="record" value="#{JobdispatchAdd.mediumProcessModel}" paginator="false" 
					rows="500"  selection="#{JobdispatchAdd.selectedProcess}" styleClass="jobdispatch-tab-table1" >
					<p:column selectionMode="multiple" id="leftpcol1" disabledSelection="true"  update=":myform:displayMulti" style="width:61px;" />
					<p:column  id="leftpcol2" style="width:250px;" >
					 <f:facet name="header">
					<span data-i18n="content.gxbm" />
				    </f:facet>
				    <h:outputText value="#{record.no}" />
					</p:column>
					<p:column  id="leftpcol3" style="width:160px;" >
					 <f:facet name="header">
					<span data-i18n="content.gxmc" />
				    </f:facet>
				     <h:outputText value="#{record.cname}" />
					</p:column>
					<p:column  id="leftpcol4" style="width:120px;">
					 <f:facet name="header">
					<span data-i18n="content.jpsj" />
				    </f:facet>
				    <h:outputText value="#{record.theoryWorktime}" />
					</p:column>
				</p:dataTable>	
              </div>
              <div class="jobdispatch-content-button">
              <div class="import">
                 <img class="import_image" src="../images/import.png"/>
               <h:graphicImage id="btn_search2" alt="search2" url="" style="display:none;">
                   <f:ajax event="click" render=":myform:car " listener="#{JobdispatchAdd.produceJobDispathList}" execute="partTypeId num taskNum planjob"  />
               </h:graphicImage>
               <div class="jobdispatch-content-btn3 jobdispatch-button1" id="button3" onclick="cxbtn2()" onmousedown="sub()" >
               <div class="zl-hengxiangyou">
               <img class="zl-hengxiang-image" src="../images/hengxiangyou.png"/>
               </div>
             <div class="jobdispatch-button-text2">
			           <span data-i18n="content.sc" />
              </div>
              </div>
             </div>
           <div class="import1">
             <img class="import_image" src="../images/guanbi.png"/>
              <h:graphicImage id="btn_search1" alt="search1" url="" style="display:none;">
                  <f:ajax  render=":myform:car " listener="#{JobdispatchAdd.delJobDispathList}" event="click"  />    
             </h:graphicImage>
            <div class="jobdispatch-content-btn3 jobdispatch-button1" id="button2" onclick="cxbtn1()">
            <div class="zl-hengxiangzuo">
             <img class="zl-hengxiang-image" src="../images/hengxiangzou.png"/>
           </div>
            <div class="jobdispatch-button-text1">
		        <span data-i18n="content.qx" /></div>
            </div>
            </div>
             </div>
            <div class="jobdispatch-content-info-tubiao1">
            <h:panelGroup id="car">
           <p:dataTable id="carList" var="record" value="#{JobdispatchAdd.jobdispatchModel}"  rows="10"  
	             paginatorPosition="bottom" editable="true"  styleClass="jobdispatch-tab-table"
                 selection="#{JobdispatchAdd.selectedJobdispatch}" > 
             <p:ajax event="rowSelect" listener="#{JobdispatchAdd.onRowSelect}"   update=":myform:carList"  />           
             <p:ajax event="rowEdit" listener="#{JobdispatchAdd.onEdit}" update=":myform:carList :myform:messages"  />
             <p:ajax event="rowEditCancel" listener="#{JobdispatchAdd.onCancel}" update=":myform:carList" />
             
             <p:column id="rightpcol1">
				<f:facet name="header" >
					 <p:selectBooleanCheckbox value="#{JobdispatchAdd.oneBool}">
						<f:ajax render=":myform:car" listener="#{JobdispatchAdd.editCheckBox}" />
					 </p:selectBooleanCheckbox>
				</f:facet>
				<p:selectBooleanCheckbox value="#{record.bool}">
					<f:ajax render=":myform:car" listener="#{JobdispatchAdd.editList(record.dno)}" />
				</p:selectBooleanCheckbox>
			  </p:column>
             <!-- <p:column id="rightpcol2" style="width:300px;">  
              <f:facet name="header">
					<span data-i18n="content.gdbm" />
				</f:facet>
              <p:cellEditor>
                <f:facet name="output">
                <h:outputText value="#{record.dno}" />               
                 </f:facet>
                <f:facet name="input">
                    <h:outputText value="#{record.dno}"   />
                </f:facet>
             </p:cellEditor>
             </p:column>        -->
           <ui:remove>
              <p:column id="rightpcol3" headerText="投料工单号"  >   
            <p:cellEditor>
                <f:facet name="output">
                    <h:outputText value="#{record.batchNo.substring(0,10)}..." />
                </f:facet>
                <f:facet name="input">
                    <h:outputText value="#{record.batchNo}" />
                </f:facet>
            </p:cellEditor>
            </p:column> 
             <p:column id="rightpcol4" headerText="任务号"  >   
             <p:cellEditor>
                <f:facet name="output">
                    <h:outputText value="#{record.taskNum}" />
                </f:facet>
                <f:facet name="input">
                    <h:outputText value="#{record.taskNum}"   />
                </f:facet>
            </p:cellEditor>
           </p:column>  
          </ui:remove>
          <p:column id="rightpcol5"  style="width:210px;" >   
               <f:facet name="header">
					<span data-i18n="content.gxbm1" />
				</f:facet>
            <p:cellEditor>
                <f:facet name="output">
                    <h:outputText value="#{record.no}" />
                </f:facet>
                <f:facet name="input">
                    <h:outputText value="#{record.no}" /> 
                </f:facet>
            </p:cellEditor>
          </p:column>  
           <p:column id="rightpcol6"  style="width:130px;" >  
            <f:facet name="header">
					<span data-i18n="content.gxmc1" />
				</f:facet>
             <p:cellEditor>
                <f:facet name="output">
                    <h:outputText value="#{record.cname}" />
                </f:facet>
                <f:facet name="input">
                    <h:outputText id="cname" value="#{record.cname}"   />
                </f:facet>
            </p:cellEditor>
           </p:column> 
           <p:column id="rightpcol7" style="width:110px;"  >    
            <f:facet name="header">
					<span data-i18n="content.sblx" />
				</f:facet>       
            <p:cellEditor>
                <f:facet name="output">
                    <h:outputText value="#{record.eduTypeName}" />
                </f:facet>
                <f:facet name="input">
                    	<h:selectOneMenu id="equTypeId" value="#{record.equTypeId}"  >            
							<f:selectItems value="#{record.eduTypeMapforupdata}" var="tt" itemLabel="#{tt.sbname}" itemValue="#{tt.sbvalue}"></f:selectItems>
					    </h:selectOneMenu>
                  </f:facet>
               </p:cellEditor>
           </p:column>  
           <p:column id="rightpcol8" style="width:40px;" >  
            <f:facet name="header">
					<span data-i18n="content.sl" />
				</f:facet> 
               <p:cellEditor>     
                <f:facet name="output">
                    <h:outputText value="#{record.num}" />
                </f:facet>
                <f:facet name="input"> 
                <h:outputText id="num" value="#{record.num}"  /> 
                </f:facet>                                 
              </p:cellEditor>
            </p:column> 
            <p:column id="rightpcol9" style="width:80px;">
             <p:rowEditor />
             </p:column>
          </p:dataTable> 
          <script language="javascript">
               guojihua();
			</script>
	   </h:panelGroup>
       </div>
      </div>
       <div class="wei_xian">
         <div class="import3">
          <img class="import_image" src="../images/guanbi.png"/>
          <h:graphicImage id="btn_search3" alt="search3" url="" style="display:none;">
              <a4j:ajax  event="click" oncomplete="parent.window.close();"></a4j:ajax>
           </h:graphicImage>
           <div class="jobdispatch-content-btn3 jobdispatch-button1" id="button4" onclick="cxbtn3()">
           <div class="jobdispatch-button-text1">
			 <span data-i18n="content.qx1" />
        </div>
       </div>
      </div>
       <div class="import2">
           <img class="import_image" src="../images/import.png"/>
            <h:graphicImage id="btn_search4" alt="search4" url="" style="display:none;">
              <a4j:ajax  event="click" oncomplete="cxbtn5()" listener="#{JobdispatchAdd.saveJobDispatch}" execute="startDate endDate" render=":myform:isSuccess"/>
         </h:graphicImage>
             <div class="jobdispatch-content-btn3 jobdispatch-button1" id="button5" onclick="cxbtn4()" >
            <div class="jobdispatch-button-text1">
			   <span data-i18n="content.bc" />
           </div>
          </div>
        </div>
    </div>
<p:growl id="messages" showDetail="true"/> 
    </div>
</h:form>
</h:body>
</ui:composition>
