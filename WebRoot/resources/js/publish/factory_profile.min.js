function insertElement(a,b,c,d,e,f){function g(){if(imgFinishCount==imgCount){var a="content1";"content1"==contentName&&(a="content2"),$("#"+contentName).css("visibility","visible"),$("#"+a).css("visibility","hidden"),contentName=a}}var h=wjb51/2050,i=hjb51/1080;a=parseInt(a*h),b=parseInt(b*i),d=rtrim(d);var j=c.substring(0,2);document.getElementById(contentName).innerHTML+=null!=f&&""!=f&&"null"!=f?"<div style='left:"+a+"px;top:"+b+"px;background:transparent;position:absolute;' id='"+d+"showimg' ><img src='./images/device/"+c+"'style='z-index: 9;'  class='dMenu'  id='"+d+"' onclick=\"oneTClick('"+d+"','"+j+"')\" /><br></div>":"<div style='left:"+a+"px;top:"+b+"px;background:transparent;position:absolute;' id='"+d+"showimg' ><img src='./images/device/"+c+"'style='z-index: 9;'   class='dMenu'   id='"+d+"' onclick=\"oneTClick('"+d+"','"+j+"')\" /><br></div>",imgReady("./images/device/"+c,function(){var a=this.width,b=this.height,c=wjb51/2150;d=d.replace(".","\\.");var e="#"+contentName+">div>#"+d;$(e).css({width:parseInt(a*c)+"px",height:parseInt(b*c)+"px"}),imgFinishCount++,g()},null,function(){imgFinishCount++,g()})}function toSubstring(a,b){var c="...";return null==a?"":"1"==b&&a.length>10?a.substring(0,10)+c:"2"==b&&a.length>16?a.substring(0,16)+c:"3"==b&&a.length>30?a.substring(0,30)+c:"4"==b&&a.length>15?a.substring(0,15)+c:"5"==b&&a.length>5?a.substring(0,5)+c:a}function returnColor(a){return 60>=a?"#00b050":80>=a?"#fed400":a>80?"#fed400":void 0}function reloadEqu(){var a=document.getElementById("myform:xz").value,b=document.getElementById("myform:yz").value,c=document.getElementById("myform:equipmentName").value,d=document.getElementById("myform:image").value,e=document.getElementById("myform:ppcrValue").value,f=document.getElementById("myform:nodpValue").value,g=document.getElementById("myform:equdayValue").value,h=document.getElementById("myform:rcrValue").value,i=document.getElementById("myform:pathThreeValue").value,j=document.getElementById("myform:ipAddressValue").value,k=a.split(","),l=b.split(","),m=c.split(","),n=d.split(","),o=e.split(","),p=(o[0]+"").split(":"),q=f.split(","),r=(q[0]+"").split(":"),s=g.split(","),t=(s[0]+"").split(":"),u=i.split(","),v=j.split(","),w=hjb51*(72/1080),x="<span style='font-family:Arial Black;font-size:"+w+"px;'>%</span>";if(document.getElementById("ppf").innerHTML=p[1]+x,document.getElementById("ppf").style.color=returnColor(parseInt(p[1])),document.getElementById("pit").innerHTML=r[1],document.getElementById("ee").innerHTML=t[1]+x,document.getElementById("ee").style.color=returnColor(parseInt(t[1])),document.getElementById("rcr").innerHTML=h+x,document.getElementById(contentName).innerHTML="",""!=k&&k.length>0){imgCount=k.length,imgFinishCount=0;for(var y=0;y<k.length;y++)insertElement(parseInt(k[y]),parseInt(l[y]),n[y]+"",m[y]+"",u[y]+"",v[y]+"");{document.getElementById("myform:selectName").value}for(y in document.images)document.images[y].ondragstart=imgdragstart}}function doubleClick(a,b,c,d){document.getElementById("bigceng").innerHTML="",clearTimeout(TimeFn);var e=rtrim(a);if(null!=d&&"gz"==d)send(a),document.getElementById("bigceng").style.backgroundImage="url('./images/device/error_"+b+"')",document.getElementById("bigceng").style.display="block",document.getElementById("myform:fp").value=a,document.getElementById("myform:equInformation").click();else if("HTC2050i-SYB21-01"==e||"ETC3650-SYB21-02"==e||"TC500R-SYB21-03"==e){document.getElementById("bigceng").style.backgroundImage="url('./images/device/swfz_"+b+"')",document.getElementById("bigceng").style.display="block",document.getElementById("myform:fp").value="TC500R-SYB21-03,ETC3650-SYB21-02,HTC2050i-SYB21-01",document.getElementById("myform:equInformation").click();var f=document.getElementById("myform:ipAddressValue").value,g=f.split(",");document.getElementById("bigceng").innerHTML="<div id='bigchartpanel' class='profile_bigceng_equ_div_one'><iframe id='myif1'  frameborder='0' scrolling='no' class='profile_fram' src='"+g[0]+"'></iframe></div><div id='bigchartpane2' class='profile_bigceng_equ_div_two'><iframe id='myif2'  frameborder='0' scrolling='no' class='profile_fram' src='"+g[1]+"'></iframe></div><div id='bigchartpane3' class='profile_bigceng_equ_div_three'><iframe id='myif3'  frameborder='0' scrolling='no' class='profile_fram' src='"+g[2]+"'></iframe></div><div class='profile_bigceng_equ_div_four'><img src='images/one_two_three.png'></div>"}else document.getElementById("bigceng").style.backgroundImage="url('./images/device/swfz"+b+"')",document.getElementById("bigceng").style.display="block",document.getElementById("myform:fp").value=a,document.getElementById("myform:equInformation").click(),document.getElementById("bigceng").innerHTML="<div id='bigchartpanel' class='profile_bigceng_equ_div_one'><iframe id='myif1'  frameborder='0' scrolling='no' class='profile_fram' src='"+c+"'></iframe></div>"}function oneTClick(a,b){clearTimeout(TimeFn),TimeFn=setTimeout(function(){null!=b&&"yx"==b?(SetCookie("equSerialNo",rtrim(a)),act(3),jumpto("i5M4-CeBIT-03"==a||"i5T3-CeBIT-02"==a||"i5M8-CeBIT-04"==a||"i5T3-CeBIT-01"==a?"/mocs/device/workshop_management_new.xhtml":"/mocs/device/workshop_management.xhtml"),document.getElementById("myform:sbglys").click()):(SetCookie("equSerialNo",rtrim(a)),act(3),jumpto("/mocs/device/workshop_management.xhtml"),document.getElementById("myform:sbglys").click())},300)}function rtrim(a){return a.replace(/(\s*$)/,"")}function yingcan(){document.getElementById("bigceng").style.display="none"}function toPage(a){var b=document.getElementById("myform:syurl").value,c=document.getElementById("myform:shurl").value;"sy"==a&&(window.location.href=b),"sh"==a&&(window.location.href=c)}function onCompleteClick(){var a=document.getElementById("myform:eif").value,b=document.getElementById("myform:fp").value,c=b.split(","),d=c[0],e=document.getElementById("myform:image").value,f=e.indexOf(d),g=e.substring(f-2,f);if(null!=b&&""!=b){var h=a.split(",");document.getElementById("bigceng").innerHTML+=null!=g&&"gz"==g?"<div class='profile_bigceng_font_div_one' align='center'><font class='profile_bigceng_font'>加工进度</font><br/><font class='profile_bigceng_font_green'>"+("undefined"==typeof h[0]?"0":h[0])+"%</font></div><div class='profile_bigceng_font_div_two_two' align='center'><font class='profile_bigceng_font'>完成工件数</font><br/><font class='profile_bigceng_font_green'>"+("undefined"==typeof h[1]?"0":h[1])+"</font></div><div class='profile_bigceng_font_div_three' align='center'><font class='profile_bigceng_font'>总能耗</font><br/><font class='profile_bigceng_font_red'>"+("undefined"==typeof h[2]?"0":h[2])+"</font></div><div class='profile_bigceng_font_div_four' align='center'><font class='profile_bigceng_font'>单件成本</font><br/><font class='profile_bigceng_font_yellow'>￥"+("undefined"==typeof h[3]?"0":h[3])+"</font></div>":"HTC2050i-SYB21-01"==d||"ETC3650-SYB21-02"==d||"TC500R-SYB21-03"==d?"<div class='profile_bigceng_font_div_one_two' align='center'><font class='profile_bigceng_font'>加工进度</font><br/><font class='profile_bigceng_font_green'>"+("undefined"==typeof h[0]?"0":h[0])+"%</font></div><div class='profile_bigceng_font_div_two' align='center'><font class='profile_bigceng_font'>完成工件数</font><br/><font class='profile_bigceng_font_green'>"+("undefined"==typeof h[1]?"0":h[1])+"</font></div><div class='profile_bigceng_font_div_three' align='center'><font class='profile_bigceng_font'>总能耗</font><br/><font class='profile_bigceng_font_red'>"+("undefined"==typeof h[2]?"0":h[2])+"</font></div><div class='profile_bigceng_font_div_four' align='center'><font class='profile_bigceng_font'>单件成本</font><br/><font class='profile_bigceng_font_yellow'>￥"+("undefined"==typeof h[3]?"0":h[3])+"</font></div>":"<div class='profile_bigceng_font_div_one' align='center'><font class='profile_bigceng_font'>加工进度</font><br/><font class='profile_bigceng_font_green'>"+("undefined"==typeof h[0]?"0":h[0])+"%</font></div><div class='profile_bigceng_font_div_two_two' align='center'><font class='profile_bigceng_font'>完成工件数</font><br/><font class='profile_bigceng_font_green'>"+("undefined"==typeof h[1]?"0":h[1])+"</font></div><div class='profile_bigceng_font_div_three' align='center'><font class='profile_bigceng_font'>总能耗</font><br/><font class='profile_bigceng_font_red'>"+("undefined"==typeof h[2]?"0":h[2])+"</font></div><div class='profile_bigceng_font_div_four' align='center'><font class='profile_bigceng_font'>单件成本</font><br/><font class='profile_bigceng_font_yellow'>￥"+("undefined"==typeof h[3]?"0":h[3])+"</font></div>"}}function loadXML(a){var b=null;if(!window.DOMParser&&window.ActiveXObject)for(var c=["MSXML.2.DOMDocument.6.0","MSXML.2.DOMDocument.3.0","Microsoft.XMLDOM"],d=0;d<c.length;d++)try{b=new ActiveXObject(c[d]),b.async=!1,b.loadXML(a);break}catch(e){}else{if(!(window.DOMParser&&document.implementation&&document.implementation.createDocument))return null;try{domParser=new DOMParser,b=domParser.parseFromString(a,"text/xml")}catch(e){}}return b}function send(a){var b=new Array;b[0]="",b[1]="",b[2]="";var c=a,d="";$.ajax({url:"http://192.168.2.19:8080/mocs/WSBZService/Portal.json?method=DiagnosticMessage",data:"parms="+c,cache:!1,dataType:"text",success:function(a){var c=JSON.parse(a),e=loadXML(c.data),f=e.documentElement.childNodes;for(i=0;i<f.length;i++)if(1==f[i].nodeType){d="error_"+f[i].nodeName+".png";var c=f[i].childNodes;for(j=0;j<c.length;j++){var g=c[j].getAttribute("cause");b[j]=j+1+"."+g}break}var h=document.getElementById("bigceng");h.innerHTML+="<div  style='margin-left:775px;margin-top:280px;width:370px;height:255px;position: absolute;font-family:微软雅黑;color: #595959;'  align='center'><div style='width:370px;height:25px;'></div><b><font style='font-size:30px;'>"+b[0]+"</font></b></div><div  style='margin-left:1160px;margin-top:280px;width:370px;height:255px;position: absolute;font-family:微软雅黑;color: #595959;'  align='center'><div style='width:370px;height:25px;'></div><b><font style='font-size:30px;'>"+b[1]+"</font></b></div><div style='margin-left:1540px;margin-top:280px;width:370px;height:255px;position: absolute;font-family:微软雅黑;color: #595959;' align='center'><div style='width:370px;height:25px;'></div><b><font style='font-size:30px;'>"+b[2]+"</font></b></div>",h.innerHTML+="<div  style='margin-left:775px;margin-top:10px;width:370px;height:255px;position: absolute;font-family:微软雅黑;color: #595959;'  align='center'><div style='width:370px;height:80px;'></div><b><font style='font-size:60px;'>故障分析</font></b></div><div  style='margin-left:1160px;margin-top:10px;width:370px;height:255px;position: absolute;background-image: url(/mocs/images/device/"+d+");'  ></div><div style='margin-left:1540px;margin-top:10px;width:370px;height:255px;position: absolute;font-family:微软雅黑;color: #595959;' align='center'><div style='width:370px;height:80px;'></div><b><font style='font-size:40px;'>故障信息已推送给</font></b><br/><br/><b><font style='font-size:40px;color:green;'>王晓明</font></b></div>"}})}var nowEqModId=0,contentName="content1",imgCount=0,imgFinishCount=0,TimeFn=null;$("#dianji").click(function(){$("#xsdiv").stop(),$("#xsdiv").animate({right:"0"},500),$("#dianji").animate({right:"-100%"},500)}),$("#ycinfoimg").click(function(){$("#xsdiv").stop(),$("#xsdiv").animate({right:"-100%"},500),$("#dianji").animate({right:"-63%"},500)});var bgpath=document.getElementById("myform:bgpath").value+"";document.getElementById("centerbg").src=null!=bgpath&&""!=bgpath?"./images/"+bgpath:"./images/WIS2_content_bg.png",$(document).ready(function(){dataTranslate("factory_profile",function(){$("*[data-i18n]").i18n()}),$.autosizeReturn(reloadEqu)});