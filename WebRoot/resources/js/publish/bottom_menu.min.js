function bottomMouseEnter(a){if("1"!=$(a).attr("expand")&&!$(".child-menus").is(":visible")){$(a).attr("expand","1");var b=142*hjb51/1080;$(a).animate({height:"+="+b+"px",top:"-="+b+"px"},100),$(".zl-bottom-bar,.zl-bottom-bar>div,.zl-bottom-bar>div>img,.zl-bottom-bar-center>div").animate({height:"+="+b+"px"},100),$(".main-menu").animate({paddingTop:b+"px"},100),$(".menu-icon").addClass("show")}}function bottomMouseLeave(a){if("1"==$(a).attr("expand")&&(1!=arguments.length||!$(".child-menus").is(":visible"))){$(a).attr("expand","0");var b=142*hjb51/1080;$(a).animate({height:"-="+b+"px",top:"+="+b+"px"},100),$(".zl-bottom-bar,.zl-bottom-bar>div,.zl-bottom-bar>div>img,.zl-bottom-bar-center>div").animate({height:"-="+b+"px"},100),$(".main-menu").animate({paddingTop:"0px"},100),$(".menu-icon").removeClass("show")}}function menuto(a,b){if(3==arguments.length)clickAble?(act(a),jumpto(b)):clickAble=!0;else{var c=a.split("-")[0],d=getCookie("menuActive").split("-")[0];c==d?1==a.split("-").length?($("#bottom_menus>.main-menu:not(:eq("+a+"))>.child-menus").hide(),$("#bottom_menus>.main-menu:eq("+a+")>.child-menus").toggle()):clickAble?(act(a),jumpto(b)):clickAble=!0:"/"!=b&&""!=b?clickAble?(act(a),jumpto(b)):clickAble=!0:($("#bottom_menus>.main-menu:not(:eq("+a+"))>.child-menus").hide(),$("#bottom_menus>.main-menu:eq("+c+")").addClass("show").find(".child-menus").toggle()),bottomMouseLeave($(".zl-bottom"),!0)}}function act(a){if(null!=a){var b=a.toString().split("-");$("#bottom_menus .main-menu").removeClass("cur"),$("#bottom_menus>.main-menu:eq("+b[0]+")").addClass("cur"),"undefined"!=typeof b[1]&&($("#bottom_menus .child-menu").removeClass("cur"),$("#bottom_menus>.main-menu:eq("+b[0]+") .child-menu:eq("+b[1]+")").addClass("cur")),SetCookie("menuActive",a)}else act("0")}function moveCurrent(){var a=8,b=getCookie("menuActive").split("-")[0],c=$(".main-menu").width()+parseFloat($(".main-menu").css("margin-right").replace("px","")),d=$(".zl-bottom-bar-center").width()-$("#bottom_menus").width(),e=0;$("#bottom_menus .main-menu").length<=a?$(".zl-bottom-bar-left,.zl-bottom-bar-right").addClass("disable"):$("#bottom_menus .main-menu").length-b<a?(e=d,$(".zl-bottom-bar-right").addClass("disable")):(0==b&&$(".zl-bottom-bar-left").addClass("disable"),e=-1*c*b),$("#bottom_menus").css("margin-left",e)}function getMenuListJson(){var a="";return $.ajax({async:!1,type:"GET",url:"WSUserService/getMenuList.json",complete:function(b){a=b.responseText}}),a}function json2Html(source){var obj=eval("("+source+")");if(obj.content)for(var parentObj=$("#bottom_menus"),index=0;index<obj.content.length;index++){var liObj=document.createElement("div");if(liObj.className="main-menu",liObj.id=obj.content[index].moduleId,liObj.innerHTML='<img class="menu-cur" src="images/menu/cur_'+obj.content[index].colour+'.png" /><div class="menu-icon"><img class="menu-icon-bg" src="images/menu/menu-bg-'+obj.content[index].colour+'.png" /><img class="menu-icon-bgDisable" src="images/menu/menu-bg-dark.png" /><img class="menu-icon-info" src="images/menu/'+obj.content[index].moduleId+'.png" /></div><span>'+obj.content[index].label+'</span><img class="menu-foot" src="images/menu/menu_foot_'+obj.content[index].colour+'.png"/>',liObj.setAttribute("onclick","menuto('"+index+"', '"+obj.content[index].url+"');"),obj.content[index].pages){var ulChild=document.createElement("div");ulChild.className="child-menus",$(ulChild).click(function(){return!1});var ulChildBg=document.createElement("div");ulChildBg.className="child-menus-bg",$(ulChildBg).appendTo(ulChild);var ulChildIcon=document.createElement("img");ulChildIcon.className="child-menus-icon",ulChildIcon.src="./images/menu/"+obj.content[index].moduleId+".png",ulChildIcon.setAttribute("onclick","menuto('"+index+"', '"+obj.content[index].url+"', true);"),$(ulChildIcon).appendTo(ulChild);for(var indexChild=0;indexChild<obj.content[index].pages.length;indexChild++){var objChild=obj.content[index].pages[indexChild],liChild=document.createElement("div");if(liChild.className="child-menu",objChild.pageId&&(liChild.id=objChild.pageId),liChild.innerHTML="<span>"+objChild.label+"</span>",liChild.setAttribute("onclick","menuto('"+(index+"-"+indexChild)+"', '"+objChild.url+"');"),objChild.pages){var ulSub=document.createElement("div");ulSub.className="sub-menus";var ulSubBg=document.createElement("div");ulSubBg.className="child-menus-bg",$(ulSubBg).appendTo(ulSub);for(var indexSub=0;indexSub<objChild.pages.length;indexSub++){var objSub=objChild.pages[indexSub],liSub=document.createElement("div");liSub.className="sub-menu",objSub.pageId&&(liSub.id=objSub.pageId),liSub.innerHTML="<span>"+objSub.label+"</span>",liSub.setAttribute("onclick","menuto('"+(index+"-"+indexChild+"-"+indexSub)+"', '"+objSub.url+"');"),ulSub.appendChild(liSub)}liChild.appendChild(ulSub)}ulChild.appendChild(liChild)}liObj.appendChild(ulChild)}parentObj.append(liObj)}}var clickAble=!0,nowSelectMenuItem=document.getElementById("menuform:nowSelectMenuItem").value,menuLoadFlag=!0;$(document).ready(function(){var a=null;if(menuLoadFlag){var b=window.sessionStorage,c=b.getItem("menu_value");a="undefined"!=typeof c&&""!=c&&null!=c?c:getMenuListJson(),b.setItem("menu_value",a)}json2Html(a),$(".child-menu>span,.sub-menu>span").each(function(){$(this).text().length>20&&$(this).css("font-size",40-$(this).text().length+"px")}),$("#bottom_menus").width(function(){var a=0;return $(this).find(".main-menu").each(function(){a+=$(this).width()+parseFloat($(this).css("margin-right").replace("px",""))}),a}),act(getCookie("menuActive")),moveCurrent(),$("#bottom_menus>.main-menu>.child-menus").hide(),$(".zl-bottom-bar-left,.zl-bottom-bar-right").click(function(){var a=parseFloat($("#bottom_menus").css("margin-left").replace("px","")),b=$(".zl-bottom-bar-center").width()-$("#bottom_menus").width(),c=$(".main-menu").width()+parseFloat($(".main-menu").css("margin-right").replace("px","")),d=8;$(this).hasClass("zl-bottom-bar-left")?a+=c:a-=c,$(".zl-bottom-bar-left,.zl-bottom-bar-right").removeClass("disable"),$("#bottom_menus .main-menu").length<=d?(a=0,$(".zl-bottom-bar-left,.zl-bottom-bar-right").addClass("disable")):(a>0&&(a=0,$(".zl-bottom-bar-left").addClass("disable")),b>a&&(a=b,$(".zl-bottom-bar-right").addClass("disable"))),$("#bottom_menus").animate({marginLeft:a},200),bottomMouseEnter($(".zl-bottom")[0])}),$(".zl-bottom").mouseenter(function(){bottomMouseEnter(this)}),$(".zl-bottom").mouseleave(function(){bottomMouseLeave(this)})});