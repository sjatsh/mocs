<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui">
	
	<link rel="stylesheet" href="../css/admin/part_process_guide.css" type="text/css"></link>
	
	<div class="toolbar">
		<h:inputHidden value="#{partProcessGuideUpdateBean.loadData}"></h:inputHidden>
		
		<span class="txt-toolbar" data-i18n="page4.top.title1"></span>
		<h:inputText value="#{partProcessGuideUpdateBean.selectProcess}"  readonly="true" styleClass="input-toolbar"></h:inputText>
		<span class="txt-toolbar" data-i18n="page4.top.title2"></span>
		<h:inputText value="#{partProcessGuideUpdateBean.selectProcessPlan}" readonly="true" styleClass="input-toolbar"></h:inputText>
	</div>
	<div class="processlist">
		<div class="tabbar">
		 	<div class="menu-tabbar act" id="btnjbxx"><span data-i18n="page4.tab.title1"></span></div>
		 	<div class="menu-tabbar" id="btnjt"><span data-i18n="page4.tab.title2"></span></div>
		 	<div class="menu-tabbar" id="btnwl"><span data-i18n="page4.tab.title3"></span></div>
		 	<div class="menu-tabbar" id="btnzy"><span data-i18n="page4.tab.title4"></span></div>
		 	<div class="menu-tabbar" id="btncb"><span data-i18n="page4.tab.title5"></span></div>
		 	<div class="menu-tabbar" id="btnzj"><span data-i18n="page4.tab.title6"></span></div>
		</div>
		<!-- 基本信息 -->
		<div class="processlist-content" id="jbxx" style="display: block;">
	    	<h:panelGroup id="jbxx">
				<h:inputHidden value="#{partProcessGuideUpdateBean.part.id}"></h:inputHidden>
		    	<div class="processlist-content-line">
		    		<span class="txt-toolbar" data-i18n="page4.jbxx.title1"></span>
		    		<span class="require">*</span>
		    		<h:inputText value="#{partProcessGuideUpdateBean.part.no}" id="partNo" styleClass="input-toolbar" readonly="true"/>
		    		
		    		<span class="txt-toolbar" data-i18n="page4.jbxx.title2"></span>
		    		<span class="require">*</span>
		    		<span class="txt-toolbar" style="margin-left: 0;">OP-</span><h:inputText value="#{partProcessGuideUpdateBean.part.processOrder}" styleClass="input-toolbar" style="width: 18%;" id="processOrder"></h:inputText>
		    		
		    		<span class="txt-toolbar" data-i18n="page4.jbxx.title3"></span>
		    		<span class="require">*</span>
		    		<h:inputText value="#{partProcessGuideUpdateBean.part.name}" id="partName" styleClass="input-toolbar"/>
		    	</div>
		    	<div class="processlist-content-line">
		    		<span class="txt-toolbar" data-i18n="page4.jbxx.title4"></span>
		    		<span class="require">*</span>
		    		<h:selectOneMenu value="#{partProcessGuideUpdateBean.part.processType}" styleClass="select-toolbar"  id="processType">
	    				   <f:selectItem itemLabel="page4.jbxx.option" itemValue="" ></f:selectItem>
					       <f:selectItem itemLabel="page4.jbxx.option1" itemValue="1" ></f:selectItem>
					       <f:selectItem itemLabel="page4.jbxx.option2" itemValue="2" ></f:selectItem>
					       <f:selectItem itemLabel="page4.jbxx.option3" itemValue="3" ></f:selectItem>
					       <a4j:ajax event="valueChange" listener="#{partProcessGuideUpdateBean.processTypeChange}" 
					       render=":myform:offlineProcess" oncomplete="translateReady();"></a4j:ajax>
					</h:selectOneMenu>
					
		    		<span class="txt-toolbar" data-i18n="page4.jbxx.title5"></span>
		    		<span class="require"></span><span class="require"></span>
    				<h:selectOneMenu value="#{partProcessGuideUpdateBean.part.onlineProcessID}" styleClass="select-toolbar">
	    				   <f:selectItem itemLabel="page4.jbxx.option" itemValue="" ></f:selectItem>
					       <f:selectItems value="#{partProcessGuideUpdateBean.pprs}"  
					           var="equ"  itemLabel="#{equ.name}"  itemValue="#{equ.id}" /> 
					</h:selectOneMenu>
					
		    		<span class="txt-toolbar" data-i18n="page4.jbxx.title6"></span>
		    		<span class="require"></span><span class="require"></span>
	    			<h:selectOneMenu value="#{partProcessGuideUpdateBean.part.offlineProcess}" styleClass="select-toolbar" id="offlineProcess">
	    				   <f:selectItem itemLabel="page4.jbxx.option" itemValue="" ></f:selectItem>
					       <f:selectItem itemLabel="page4.jbxx.option4" itemValue="1" ></f:selectItem>
					       <f:selectItem itemLabel="page4.jbxx.option5" itemValue="0" ></f:selectItem>
					</h:selectOneMenu>
		    	</div>
		    	<div class="processlist-content-line">
		    		<span class="txt-toolbar" data-i18n="page4.jbxx.title7"></span>
		    		<span class="require"></span><span class="require"></span>
	    			<h:selectOneMenu value="#{partProcessGuideUpdateBean.part.processDuration}" styleClass="select-toolbar">
	    				   <f:selectItem itemLabel="page4.jbxx.option" itemValue="" ></f:selectItem>
					       <f:selectItem itemLabel="page4.jbxx.option4" itemValue="1" ></f:selectItem>
					       <f:selectItem itemLabel="page4.jbxx.option5" itemValue="0" ></f:selectItem>
					</h:selectOneMenu>
					
		    		<span class="txt-toolbar" data-i18n="page4.jbxx.title8"></span>
		    		<span class="require">*</span>
	    			<h:selectOneMenu value="#{partProcessGuideUpdateBean.part.ischeck}" styleClass="select-toolbar" id="ischeck">
	    				   <f:selectItem itemLabel="page4.jbxx.option" itemValue="" ></f:selectItem>
					       <f:selectItem itemLabel="page4.jbxx.option4" itemValue="1" ></f:selectItem>
					       <f:selectItem itemLabel="page4.jbxx.option5" itemValue="0" ></f:selectItem>
					</h:selectOneMenu>
					
		    		<span class="txt-toolbar" data-i18n="page4.jbxx.title9"></span>
		    		<span class="require"></span><span class="require"></span>
    				<h:selectOneMenu value="#{partProcessGuideUpdateBean.part.checktype}" styleClass="select-toolbar">
	    				   <f:selectItem itemLabel="page4.jbxx.option" itemValue="" ></f:selectItem>
					       <f:selectItem itemLabel="page4.jbxx.option6" itemValue="201" ></f:selectItem>
					       <f:selectItem itemLabel="page4.jbxx.option7" itemValue="202" ></f:selectItem>
					       <f:selectItem itemLabel="page4.jbxx.option8" itemValue="203" ></f:selectItem>
					       <f:selectItem itemLabel="page4.jbxx.option9" itemValue="204" ></f:selectItem>
					       <f:selectItem itemLabel="page4.jbxx.option10" itemValue="205" ></f:selectItem>
					       <f:selectItem itemLabel="page4.jbxx.option11" itemValue="206" ></f:selectItem>
					       <f:selectItem itemLabel="page4.jbxx.option12" itemValue="207" ></f:selectItem>
					</h:selectOneMenu>
		    	</div>
		    	<div class="processlist-content-line high">
		    		<span class="txt-toolbar" data-i18n="page4.jbxx.title10"></span>
		    		<span class="require"></span><span class="require"></span>
		    		<rich:fileUpload doneLabel="文件上传成功"
				        noDuplicate="true"
			 			serverErrorLabel="文件过大,导致文件上传失败"
						fileUploadListener="#{partProcessGuideUpdateBean.Upload}"
						id="upload" acceptedTypes="jpg,pdf"
						ontyperejected="alert('添加文件格式为jpg,pdf');" 
						clearLabel="clear" deleteLabel="删除" addLabel="添加文件"
						uploadLabel="上传文件" 
						styleClass="div-upload">
						<f:ajax event="uploadcomplete" execute="@none" render="myform:file"></f:ajax>
		       		</rich:fileUpload>
    				<h:inputText value="#{partProcessGuideUpdateBean.part.file}" id="file" style="display:none;"></h:inputText>
		    	</div>
		    	<div class="processlist-content-line high">
		    		<span class="txt-toolbar" style="vertical-align: top;" data-i18n="page4.jbxx.title11"></span>
		    		<span class="require"></span><span class="require"></span>
		    		<h:inputTextarea value="#{partProcessGuideUpdateBean.part.description}" styleClass="textarea"></h:inputTextarea>
		    	</div>
	    	</h:panelGroup>
	    	<div class="div-conctrl">
	    		<div class="div-conctrl-content">
		    		<p:commandLink id="btn_save" value="page4.conctrl.btn2" actionListener="#{partProcessGuideUpdateBean.Save}"  
		    			update=":myform:messages :myform:updateSuccess" oncomplete="navigation()" 
		    		styleClass="btn-conctrl btn-save btn-cur"></p:commandLink>
		    		<p:commandLink value="page4.conctrl.btn3"  styleClass="btn-conctrl btn-next" onclick="jbxxNext()"></p:commandLink>
	    		</div>
	    	</div>
	    </div>
		<!-- 机台 -->
	    <div class="processlist-content" id="jt">
	    	<div class="processlist-content-line">
	    		<span class="txt-toolbar" data-i18n="page4.jt.title1"></span>
	    		<span class="require">*</span>
   				<h:selectOneMenu value="#{partProcessGuideUpdateBean.part.programID}" id="programID"  styleClass="select-toolbar">
   				   <f:selectItem itemLabel="page4.jt.option" itemValue="请选择"></f:selectItem>
			       <f:selectItems value="#{partProcessGuideUpdateBean.ncprogsList}"  
			           var="ncp"  itemLabel="#{ncp.progName}"  itemValue="#{ncp.id}" />  
			    </h:selectOneMenu> 
	    		
	    		<span class="txt-toolbar" data-i18n="page4.jt.title2"></span>
	    		<span class="require"></span><span class="require"></span>
   				<h:inputText value="#{partProcessGuideUpdateBean.part.processingTime}" id="processingTime" styleClass="input-toolbar">
   				</h:inputText>
    		</div>
	    	<div class="processlist-content-line">
	    		<span class="txt-toolbar" data-i18n="page4.jt.title3"></span>
	    		<span class="require">*</span>
   				<h:inputText value="#{partProcessGuideUpdateBean.part.theoryWorktime}" id="theoryWorktime" styleClass="input-toolbar">
   				</h:inputText>
	    		
	    		<span class="txt-toolbar" data-i18n="page4.jt.title4"></span>
	    		<span class="require"></span><span class="require"></span>
   				<h:inputText value="#{partProcessGuideUpdateBean.part.capacity}" id="capacity" styleClass="input-toolbar">
   				</h:inputText> 
    			<span class="txt-toolbar" style="margin-left: 0;" data-i18n="page4.jt.title5"></span>
	    	</div>
	    	<div class="processlist-content-line jtTable">
	    		<div class="table-p-bg"></div>
				<p:dataTable var="sb" value="#{partProcessGuideUpdateBean.tpeqModel}" 
			    	editable="true" sortMode="multiple" dynamic="true" selection="#{partProcessGuideUpdateBean.selectedRowEqu}" 
			    	paginator="false" paginatorPosition="bottom" id="sblist" styleClass="table-p">
		   			<p:column selectionMode="multiple"  />
				  	<p:column headerText="page4.jt.title6"   >
						<h:outputText value="#{sb.equipmentTypeName}" />
			        </p:column>
			        <p:column headerText="page4.jt.title7">
						<h:outputText value="#{sb.equipmentName}" />
			        </p:column>
				</p:dataTable>
		  		<p:dialog widgetVar="addSB" id="addsb" styleClass="div-dialog" resizable="false">
				  	<table>
				  		<tr>
				  			<td><span class="txt-toolbar" data-i18n="page4.jt.title6"></span></td>
				  			<td>
				  				<h:inputText value="#{partProcessGuideUpdateBean.addtpEqu.equipmentTypeName}"  styleClass="input-toolbar" onfocus="of()" 
				  					id="treetxt"/>
				  				<div id="tree" style="display:none;">
					  				<p:tree id="treeSingle" value="#{partProcessGuideUpdateBean.root}" var="node"  
								    	selection="#{partProcessGuideUpdateBean.selectedNode}" selectionMode="single"> 
								        <p:ajax event="select" listener="#{partProcessGuideUpdateBean.onNodeSelect}" 
								        	update=":myform:treeSingle :myform:equinfo :myform:treetxt" oncomplete="cc();"/>  
								        <p:treeNode>  
								            <h:outputText value="#{node.equipmentType}" />  
								        </p:treeNode>  
								   </p:tree>
							   </div>  
				  			</td>
			  			</tr>
			  			<tr>
				  			<td><span class="txt-toolbar" data-i18n="page4.jt.title7"></span></td>
				  			<td>
				  				<h:selectOneMenu value="#{partProcessGuideUpdateBean.addtpEqu.equipmentName}"  id="equinfo" styleClass="select-toolbar">
				  				   <f:selectItem itemLabel="page4.jt.option" itemValue=""></f:selectItem>
							       <f:selectItems value="#{partProcessGuideUpdateBean.equinfolist}"  
							           var="equ"  itemLabel="#{equ.equName}"  itemValue="#{equ.equSerialNo}" />  
							    </h:selectOneMenu> 
				  			</td>
				  		</tr>
				  	</table>
				  	<div class="dialog-bottomBar">
		  				<p:commandButton value="page4.toolbarBottom.btn1"  styleClass="btn-toolbar" onclick="AddEqu()"></p:commandButton>
		  				<p:commandButton value="page4.toolbarBottom.btn1"  style="display:none;" actionListener="#{partProcessGuideUpdateBean.onaddEqu}" 
		  				 update=":myform:sblist :myform:treetxt :myform:equinfo " oncomplete="addSB.hide();translateReady();" id="AddEquBtn"></p:commandButton>
				  	</div>
				</p:dialog>
			</div>
	    	<div class="toolbar-bottom">
			    <p:commandButton value="page4.toolbarBottom.btn1" oncomplete="addSB.show()" styleClass="btn-toolbar" />
		    	<p:commandButton value="page4.toolbarBottom.btn2" actionListener="#{partProcessGuideUpdateBean.ondelEqu}" styleClass="btn-toolbar" 
		    		update=":myform:sblist" oncomplete="translateReady();"></p:commandButton>
			</div>
	    	<div class="div-conctrl">
	    		<div class="div-conctrl-content">
			    	<p:commandLink id="btn_prev_jt" value="page4.conctrl.btn1"  onclick="jtBack()" styleClass="btn-conctrl btn-prev"></p:commandLink>
			    	<p:commandLink value="page4.conctrl.btn2" actionListener="#{partProcessGuideUpdateBean.Save}" 
			    		update=":myform:messages :myform:updateSuccess" styleClass="btn-conctrl btn-save btn-cur" oncomplete="navigation()"></p:commandLink>
			    	<p:commandLink id="btn_next_jt" value="page4.conctrl.btn3"  onclick="jtNext()" styleClass="btn-conctrl btn-next"></p:commandLink>
		    	</div>
	    	</div>
	    </div>
		<!-- 物料 -->
	    <div class="processlist-content" id="wl">
			<div class="processlist-content-line wlTable">	
	    		<div class="table-p-bg"></div>				
		    	<p:dataTable var="wl" value="#{partProcessGuideUpdateBean.mediumPartModel}" id="wld"
			    	editable="true" sortMode="multiple" dynamic="true" selection="#{partProcessGuideUpdateBean.selectedRowPart}" 
			    	paginator="false" paginatorPosition="bottom" styleClass="table-p">
		   			<p:column selectionMode="multiple"  />
				  	<p:column headerText="page4.wl.title1"   >
			        	<h:outputText value="#{wl.wlNo}" />
			        </p:column>
			        <p:column headerText="page4.wl.title2" >
			        	<h:outputText value="#{wl.wlName}" />
			        </p:column>
			        <p:column headerText="page4.wl.title3"   >
		        		<h:outputText value="#{wl.wlnorm}" />
			        </p:column>
			        <p:column headerText="page4.wl.title4"   >
			        	<h:outputText value="#{wl.wlType}" />
			        </p:column>
			        <p:column headerText="page4.wl.title5"   >
			        	<h:outputText value="#{wl.wlNumber}" />
			        </p:column>
				</p:dataTable>
				<p:dialog widgetVar="addWl" resizable="false" styleClass="div-dialog">
				  	<table>
				  		<tr>
				  			<td><span class="txt-toolbar" data-i18n="page4.wl.title1"></span></td>
				  			<td>
				  				<h:selectOneMenu value="#{partProcessGuideUpdateBean.addWL.wlNo}" id="wlNo" styleClass="select-toolbar">
							    	<f:selectItems value="#{partProcessGuideUpdateBean.selectWL}"  
							        	var="wls"  itemLabel="#{wls.no}"  itemValue="#{wls.no}" />  
							       	<f:ajax event="valueChange" listener="#{partProcessGuideUpdateBean.selectWLChange}" 
							       		render=":myform:wlname :myform:wlnorm"></f:ajax>
							    </h:selectOneMenu> 
				  			</td>
				  			<td><span class="txt-toolbar" data-i18n="page4.wl.title2"></span></td>
				  			<td><h:inputText value="#{partProcessGuideUpdateBean.addWL.wlName}" id="wlname" readonly="true" styleClass="input-toolbar"/></td>
				  			<td><span class="txt-toolbar" data-i18n="page4.wl.title3"></span></td>
				  			<td><h:inputText value="#{partProcessGuideUpdateBean.addWL.wlnorm}" id="wlnorm" readonly="true" styleClass="input-toolbar"/></td>
				  		</tr>
				  		<tr>
				  			<td><span class="txt-toolbar" data-i18n="page4.wl.title4"></span></td>
				  			<td>
				  				<h:selectOneMenu value="#{partProcessGuideUpdateBean.addWL.wlType}" id="wlType" styleClass="select-toolbar">
				  					<f:selectItem itemLabel="page4.wl.option" itemValue=""></f:selectItem>
				  					<f:selectItem itemLabel="page4.wl.option1" itemValue="主料"></f:selectItem>
				  					<f:selectItem itemLabel="page4.wl.option2" itemValue="辅料"></f:selectItem>
				  					<f:selectItem itemLabel="page4.wl.option3" itemValue="前序物料"></f:selectItem>
							    </h:selectOneMenu> 
						    </td>
				  			<td><span class="txt-toolbar" data-i18n="page4.wl.title5"></span></td>
				  			<td><h:inputText value="#{partProcessGuideUpdateBean.addWL.wlNumber}" id="wlNumber" styleClass="input-toolbar"/></td>
				  		</tr>
				  	</table>
				  	<div class="dialog-bottomBar">
		  				<p:commandButton value="page4.toolbarBottom.btn1" styleClass="btn-toolbar" onclick="wuisnull()" />
		  				<p:commandButton value="新增" actionListener="#{partProcessGuideUpdateBean.AddWlPojo}" 
			  				update=":myform:wld :myform:wlNo :myform:wlname :myform:wlnorm :myform:wlType :myform:wlNumber " 
			  				style="display:none;" id="wladd" oncomplete="addWl.hide();translateReady();"/>
		  			</div>
				</p:dialog>
			</div>
	    	<div class="toolbar-bottom">
			    <p:commandButton value="page4.toolbarBottom.btn1"  oncomplete="addWl.show()" styleClass="btn-toolbar" />
		    	<p:commandButton value="page4.toolbarBottom.btn2"  actionListener="#{partProcessGuideUpdateBean.onDelete}" styleClass="btn-toolbar" 
		    		update=":myform:wld" oncomplete="translateReady();"/>
			</div>
	    	<div class="div-conctrl">
	    		<div class="div-conctrl-content">
				    <p:commandLink id="btn_prev_wl" value="page4.conctrl.btn1" onclick="wlBack()" styleClass="btn-conctrl btn-prev"></p:commandLink>
				    <p:commandLink value="page4.conctrl.btn2" actionListener="#{partProcessGuideUpdateBean.Save}" 
				    update=":myform:messages :myform:updateSuccess" styleClass="btn-conctrl btn-save btn-cur" oncomplete="navigation()"></p:commandLink> 
		    		<p:commandLink id="btn_next_wl" value="page4.conctrl.btn3" onclick="wlNext()" styleClass="btn-conctrl btn-next"></p:commandLink>
			   </div>
	    	</div>
	    </div>
		<!-- 资源 -->
	    <div class="processlist-content" id="zy">
	    	<div class="processlist-content-line">
	    		<span class="txt-toolbar" data-i18n="page4.zy.title1"></span>
	    		<span class="require"></span><span class="require"></span>
	    		<h:inputText value="#{partProcessGuideUpdateBean.part.installTime}" styleClass="input-toolbar" id="installTime"></h:inputText>
	    		<span class="txt-toolbar" data-i18n="page4.zy.title2"></span>
	    		<span class="require"></span><span class="require"></span>
	    		<h:inputText value="#{partProcessGuideUpdateBean.part.uninstallTime}" styleClass="input-toolbar" id="uninstallTime"></h:inputText>
	    	</div>
			<div class="processlist-content-line zyTable">
				<div class="table-p-bg"></div>
		   		<p:dataTable var="jj" value="#{partProcessGuideUpdateBean.tpftdm}" id="djj"
			    	editable="true" sortMode="multiple" dynamic="true" selection="#{partProcessGuideUpdateBean.selectRowJJ}" 
			    	paginator="false" paginatorPosition="bottom" styleClass="table-p">
		   			<p:column selectionMode="multiple"  />
				  	<p:column headerText="page4.zy.title3"   >
	                    <h:outputText value="#{jj.fixtureNO}" />
			        </p:column>
			        <p:column headerText="page4.zy.title4"   >
	                    <h:outputText value="#{jj.fixtureName}" />
			        </p:column>
				 </p:dataTable>
				 <p:dialog widgetVar="addJJdata" styleClass="div-dialog" resizable="false">
				 	<table>
				 		<tr>
				 			<td><span class="txt-toolbar" data-i18n="page4.zy.title8"></span></td>
				 			<td>
				 				<h:selectOneMenu value="#{partProcessGuideUpdateBean.jjflb}" styleClass="select-toolbar" 
			    					id="partClassId">
				  					<f:selectItem itemLabel="page4.zy.option"  itemValue="" /> 
							        <f:selectItems value="#{partProcessGuideUpdateBean.jjlblist}"  
							        	var="jj"  itemLabel="#{jj.name}"  itemValue="#{jj.id}" />  
							       	<a4j:ajax event="valueChange" listener="#{partProcessGuideUpdateBean.selectJJLBChange}" 
							       		render=":myform:jjName :myform:jjNo" oncomplete="translateReady();"></a4j:ajax>
							    </h:selectOneMenu>
				 			</td>
			    			<td><span class="txt-toolbar" data-i18n="page4.zy.title3"></span></td>
			    			<td>
			    				<h:selectOneMenu value="#{partProcessGuideUpdateBean.addtftm.fixturetypeId}" styleClass="select-toolbar" 
			    					id="jjNo">
				  					<f:selectItem itemLabel="page4.zy.option"  itemValue="" /> 
							        <f:selectItems value="#{partProcessGuideUpdateBean.jjlist}"  
							        	var="jj"  itemLabel="#{jj.fixturesNo}"  itemValue="#{jj.id}" />  
							    	<a4j:ajax event="valueChange" listener="#{partProcessGuideUpdateBean.selectJJChange}" 
							       		render=":myform:jjName :myform:jjNo" oncomplete="translateReady();"></a4j:ajax>
							    </h:selectOneMenu>
			    			</td>
			    			<td><span class="txt-toolbar" data-i18n="page4.zy.title4"></span></td>
			    			<td><h:inputText value="#{partProcessGuideUpdateBean.addtftm.fixtureName}" id="jjName" readonly="true" 
			    				styleClass="input-toolbar" ></h:inputText> </td>
			    		</tr>
				 	</table>
				 	<div class="dialog-bottomBar">
	    				<p:commandButton value="page4.toolbarBottom.btn1" onclick="AddJJData()" styleClass="btn-toolbar"></p:commandButton>
	    				<p:commandButton value="新增" actionListener="#{partProcessGuideUpdateBean.addJJ}" 
	    					update=":myform:djj :myform:jjNo :myform:jjName" oncomplete="addJJdata.hide();translateReady();" 
	    					style="display:none;" id="AddJJBtn"/>
				 	</div>
				 </p:dialog> 
			</div>
	    	<div class="toolbar-bottom">
		    	<p:commandButton value="page4.toolbarBottom.btn1"  oncomplete="addJJdata.show()" styleClass="btn-toolbar"></p:commandButton>
		    	<p:commandButton value="page4.toolbarBottom.btn2"  actionListener="#{partProcessGuideUpdateBean.delJJ}" 
		    		styleClass="btn-toolbar" update=":myform:djj" oncomplete="translateReady();">
		    	</p:commandButton>
	    	</div>
			<div class="processlist-content-line zyTable">
				<div class="table-p-bg"></div>
		    	<p:dataTable var="dj" value="#{partProcessGuideUpdateBean.mediumDJModel}" id="djd"
			    	editable="true" sortMode="multiple" dynamic="true" selection="#{partProcessGuideUpdateBean.selectedRowDJ}" 
			    	paginator="false" paginatorPosition="bottom" styleClass="table-p">
		   			<p:column selectionMode="multiple"  />
				  	<p:column headerText="page4.zy.title5">
	                    <h:outputText value="#{dj.no}" />
			        </p:column>
			        <p:column headerText="page4.zy.title6">
	                    <h:outputText value="#{dj.name}" />
			        </p:column>
			        <p:column headerText="page4.zy.title7">
	                    <h:outputText value="#{dj.requirementNum}" />
			        </p:column>
				</p:dataTable>
				<p:dialog widgetVar="addZY" styleClass="div-dialog" resizable="false">
				  	<table>
				  		<tr>
				  			<td><span class="txt-toolbar" data-i18n="page4.zy.title5"></span></td>
				  			<td>
				  				<h:selectOneMenu value="#{partProcessGuideUpdateBean.addDJ.no}" id="djselect" styleClass="select-toolbar">
							    	<f:selectItems value="#{partProcessGuideUpdateBean.selectDJ}"  
							        	var="djs"  itemLabel="#{djs.no}"  itemValue="#{djs.no}" />  
							    	<a4j:ajax event="valueChange" listener="#{partProcessGuideUpdateBean.selectDJChange}" render=":myform:djname" oncomplete="translateReady();"></a4j:ajax>
							    </h:selectOneMenu> 
				  			</td>
				  			<td><span class="txt-toolbar" data-i18n="page4.zy.title6"></span></td>
				  			<td><h:inputText value="#{partProcessGuideUpdateBean.addDJ.name}" id="djname" readonly="true" styleClass="input-toolbar"/></td>
				  			<td><span class="txt-toolbar" data-i18n="page4.zy.title7"></span></td>
				  			<td><h:inputText value="#{partProcessGuideUpdateBean.addDJ.requirementNum}" styleClass="input-toolbar" id="djNum"/></td>
				  		</tr>
				  	</table>
				  	<div class="dialog-bottomBar">
		  				<p:commandButton value="page4.toolbarBottom.btn1" onclick="AddDJData()" styleClass="btn-toolbar"></p:commandButton>
		  				<p:commandButton value="新增" actionListener="#{partProcessGuideUpdateBean.AddDjPojo}" 
		  					update=":myform:djd :myform:djselect :myform:djname :myform:djNum"  oncomplete="addZY.hide();translateReady();" 
		  					id="AddDjBtn" style="display:none;"/>
				  	</div>
				  </p:dialog>
			</div>
	    	<div class="toolbar-bottom">
		    	<p:commandButton value="page4.toolbarBottom.btn1"  oncomplete="addZY.show()" styleClass="btn-toolbar"></p:commandButton>
		    	<p:commandButton value="page4.toolbarBottom.btn2" oncomplete="translateReady();" update=":myform:djd"  actionListener="#{partProcessGuideUpdateBean.onZYDelete}" styleClass="btn-toolbar" />
	    	</div>
	    	<div class="div-conctrl">
	    		<div class="div-conctrl-content">
				    <p:commandLink id="btn_prev_zy" value="page4.conctrl.btn1" onclick="zyBack()" styleClass="btn-conctrl btn-prev"></p:commandLink>
				    <p:commandLink value="page4.conctrl.btn2" actionListener="#{partProcessGuideUpdateBean.Save}" 
				    	update=":myform:messages :myform:updateSuccess" styleClass="btn-conctrl btn-save btn-cur" oncomplete="navigation()"></p:commandLink> 
		    		<p:commandLink id="btn_next_zy" value="page4.conctrl.btn3" onclick="zyNext()" styleClass="btn-conctrl btn-next"></p:commandLink>
			   </div>
	    	</div>
	    </div>
	    <!-- 成本 -->
	    <div class="processlist-content" id="cb">
	    	<div class="processlist-content-line">
	    		<span class="txt-toolbar" data-i18n="page4.cb.title1"></span>
	    		<span class="require"></span><span class="require"></span>
	    		<h:inputText value="#{partProcessGuideUpdateBean.part.mainMaterialCost}" styleClass="input-toolbar" id="mainMaterialCost"></h:inputText>
	    		
	    		<span class="txt-toolbar" data-i18n="page4.cb.title2"></span>
	    		<span class="require"></span><span class="require"></span>
	    		<h:inputText value="#{partProcessGuideUpdateBean.part.peopleCost}" styleClass="input-toolbar" id="peopleCost"></h:inputText>
	    		
	    		<span class="txt-toolbar" data-i18n="page4.cb.title3"></span>
	    		<span class="require"></span><span class="require"></span>
	    		<h:inputText value="#{partProcessGuideUpdateBean.part.subsidiaryMaterialCost}" styleClass="input-toolbar" id="subsidiaryMaterialCost"></h:inputText>
	    	</div>
	    	<div class="processlist-content-line">
	    		<span class="txt-toolbar" data-i18n="page4.cb.title4"></span>
	    		<span class="require"></span><span class="require"></span>
	    		<h:inputText value="#{partProcessGuideUpdateBean.part.energyCost}" styleClass="input-toolbar" id="energyCost"></h:inputText>
	    		
	    		<span class="txt-toolbar" data-i18n="page4.cb.title5"></span>
	    		<span class="require"></span><span class="require"></span>
	    		<h:inputText value="#{partProcessGuideUpdateBean.part.deviceCost}" styleClass="input-toolbar" id="deviceCost"></h:inputText>
	    		
	    		<span class="txt-toolbar" data-i18n="page4.cb.title6"></span>
	    		<span class="require"></span><span class="require"></span>
	    		<h:inputText value="#{partProcessGuideUpdateBean.part.resourceCost}" styleClass="input-toolbar" id="resourceCost"></h:inputText>
	    	</div>
	    	<div class="processlist-content-line cbSpace"></div>
	    	<div class="div-conctrl">
	    		<div class="div-conctrl-content">
	    			<p:commandLink id="btn_prev_cb" value="page4.conctrl.btn1"  onclick="cbBack()" styleClass="btn-conctrl btn-prev" ></p:commandLink> 
	    			<p:commandLink value="page4.conctrl.btn2" actionListener="#{partProcessGuideUpdateBean.Save}" 
	    				update=":myform:messages :myform:updateSuccess" styleClass="btn-conctrl btn-save btn-cur" oncomplete="navigation()"></p:commandLink>
	    			<p:commandLink id="btn_next_cb" value="page4.conctrl.btn3"  onclick="cbNext()" styleClass="btn-conctrl btn-next"></p:commandLink>
			   </div>
	    	</div>
	    </div>
	    <!-- 质检 -->
	    <div class="processlist-content" id="zj">
			<div class="processlist-content-line wlTable">
				<div class="table-p-bg"></div>
		    	<p:dataTable var="zj" value="#{partProcessGuideUpdateBean.tqpdModel}" id="zj"
		    		editable="true" sortMode="multiple" dynamic="true" selection="#{partProcessGuideUpdateBean.selectedRowtqp}" 
		    		paginator="false" paginatorPosition="bottom" styleClass="table-p">
		   			<p:column selectionMode="multiple"  />
				  	<p:column headerText="page4.zj.title1">
			            <p:cellEditor>
			                <f:facet name="output">
			                    <h:outputText value="#{zj.qualityNo}" />
			                </f:facet>
			                <f:facet name="input">
			                    <p:inputText value="#{zj.qualityNo}" style="width:100%" />
			                </f:facet>
			            </p:cellEditor>
			        </p:column>
			        <p:column headerText="page4.zj.title2">
			            <p:cellEditor>
			                <f:facet name="output">
			                    <h:outputText value="#{zj.qualityName}" />
			                </f:facet>
			                <f:facet name="input">
			                    <p:inputText value="#{zj.qualityName}" style="width:100%" readonly="true"/>
			                </f:facet>
			            </p:cellEditor>
			        </p:column>
			        <p:column headerText="page4.zj.title3">
			            <p:cellEditor>
			                <f:facet name="output">
			                    <h:outputText value="#{zj.isKey}" />
			                </f:facet>
			                <f:facet name="input">
			                    <p:inputText value="#{zj.isKey}" style="width:100%"/>
			                </f:facet>
			            </p:cellEditor>
			        </p:column>
			          <p:column headerText="page4.zj.title4">
			            <p:cellEditor>
			                <f:facet name="output">
			                    <h:outputText value="#{zj.standardValue}" />
			                </f:facet>
			                <f:facet name="input">
			                    <p:inputText value="#{zj.standardValue}" style="width:100%"/>
			                </f:facet>
			            </p:cellEditor>
			        </p:column>
			          <p:column headerText="page4.zj.title5">
			            <p:cellEditor>
			                <f:facet name="output">
			                    <h:outputText value="#{zj.maxValue}" />
			                </f:facet>
			                <f:facet name="input">
			                    <p:inputText value="#{zj.maxValue}" style="width:100%"/>
			                </f:facet>
			            </p:cellEditor>
			        </p:column>
			          <p:column headerText="page4.zj.title6">
			            <p:cellEditor>
			                <f:facet name="output">
			                    <h:outputText value="#{zj.minValue}" />
			                </f:facet>
			                <f:facet name="input">
			                    <p:inputText value="#{zj.minValue}" style="width:100%"/>
			                </f:facet>
			            </p:cellEditor>
			        </p:column>
			          <p:column headerText="page4.zj.title7">
			            <p:cellEditor>
			                <f:facet name="output">
			                    <h:outputText value="#{zj.unit}" />
			                </f:facet>
			                <f:facet name="input">
			                    <p:inputText value="#{zj.unit}" style="width:100%"/>
			                </f:facet>
			            </p:cellEditor>
			        </p:column>
			        <p:column headerText="page4.zj.title8">
			            <p:cellEditor>
			                <f:facet name="output">
			                    <h:outputText value="#{zj.maxTolerance}" />
			                </f:facet>
			                <f:facet name="input">
			                    <p:inputText value="#{zj.maxTolerance}" style="width:100%"/>
			                </f:facet>
			            </p:cellEditor>
			        </p:column>
			        <p:column headerText="page4.zj.title9">
			            <p:cellEditor>
			                <f:facet name="output">
			                    <h:outputText value="#{zj.minTolerance}" />
			                </f:facet>
			                <f:facet name="input">
			                    <p:inputText value="#{zj.minTolerance}" style="width:100%"/>
			                </f:facet>
			            </p:cellEditor>
			        </p:column>
			         <p:column headerText="page4.zj.title10">
			            <p:cellEditor>
			                <f:facet name="output">
			                    <h:outputText value="#{zj.description}" />
			                </f:facet>
			                <f:facet name="input">
			                    <p:inputText value="#{zj.description}" style="width:100%"/>
			                </f:facet>
			            </p:cellEditor>
			        </p:column>
			         <p:column headerText="page4.zj.title11">
			            <p:cellEditor>
			                <f:facet name="output">
			                    <h:outputText value="#{zj.checkTime}" />
			                </f:facet>
			                <f:facet name="input">
			                    <p:inputText value="#{zj.checkTime}" style="width:100%"/>
			                </f:facet>
			            </p:cellEditor>
			        </p:column>
			         <p:column headerText="page4.zj.title12">
			            <p:cellEditor>
			                <f:facet name="output">
			                    <h:outputText value="#{zj.checkType}" />
			                </f:facet>
			                <f:facet name="input">
			                    <p:inputText value="#{zj.checkType}" style="width:100%"/>
			                </f:facet>
			            </p:cellEditor>
			        </p:column>
				  </p:dataTable>
				  <p:dialog widgetVar="addZJ" styleClass="div-dialog high" resizable="false">
				  	<table>
				  		<tr>
				  			<td><span class="txt-toolbar" data-i18n="page4.zj.title1"></span></td>
				  			<td><h:inputText value="#{partProcessGuideUpdateBean.tqp.qualityNo}" styleClass="input-toolbar" id="zjno"/></td>
				  			<td><span class="txt-toolbar" data-i18n="page4.zj.title2"></span></td>
				  			<td><h:inputText value="#{partProcessGuideUpdateBean.tqp.qualityName}" styleClass="input-toolbar" id="zjname"/></td>
				  		</tr>
				  		<tr>
				  			<td><span class="txt-toolbar" data-i18n="page4.zj.title3"></span></td>
				  			<td>
				  				<h:selectOneMenu value="#{partProcessGuideUpdateBean.tqp.isKey}" id="zjiskey" styleClass="select-toolbar">
				  					<f:selectItem itemLabel="page4.zj.option"  itemValue="" /> 
							     	<f:selectItem itemLabel="page4.zj.option1"  itemValue="1" /> 
							     	<f:selectItem itemLabel="page4.zj.option2"  itemValue="0" /> 
							    </h:selectOneMenu> 
				  			</td>
				  			<td><span class="txt-toolbar" data-i18n="page4.zj.title4"></span></td>
				  			<td><h:inputText value="#{partProcessGuideUpdateBean.tqp.standardValue}" styleClass="input-toolbar" id="zjsv"/></td>
				  		</tr>
				  		<tr>
				  			<td><span class="txt-toolbar" data-i18n="page4.zj.title5"></span></td>
				  			<td><h:inputText value="#{partProcessGuideUpdateBean.tqp.maxValue}" styleClass="input-toolbar" id="zjmaxv"/></td>
				  			<td><span class="txt-toolbar" data-i18n="page4.zj.title6"></span></td>
				  			<td><h:inputText value="#{partProcessGuideUpdateBean.tqp.minValue}" styleClass="input-toolbar" id="zjminv"/></td>
				  		</tr>
				  		<tr>
				  			<td><span class="txt-toolbar" data-i18n="page4.zj.title8"></span></td>
				  			<td><h:inputText value="#{partProcessGuideUpdateBean.tqp.maxTolerance}" styleClass="input-toolbar" id="zjto"/></td>
				  			<td><span class="txt-toolbar" data-i18n="page4.zj.title9"></span></td>
				  			<td><h:inputText value="#{partProcessGuideUpdateBean.tqp.minTolerance}" styleClass="input-toolbar" id="zjto2"/></td>
				  		</tr>
				  		<tr>
				  			<td><span class="txt-toolbar" data-i18n="page4.zj.title11"></span></td>
				  			<td><h:inputText value="#{partProcessGuideUpdateBean.tqp.checkTime}" styleClass="input-toolbar" id="zjctime"/></td>
				  			<td><span class="txt-toolbar" data-i18n="page4.zj.title12"></span></td>
				  			<td><h:inputText value="#{partProcessGuideUpdateBean.tqp.checkType}" styleClass="input-toolbar" id="zjctype"/></td>
				  		</tr>
				  		<tr>
				  			<td><span class="txt-toolbar" data-i18n="page4.zj.title7"></span></td>
				  			<td colspan="3"><h:inputText value="#{partProcessGuideUpdateBean.tqp.unit}" styleClass="input-toolbar" id="zjunit"/></td>
				  		</tr>
				  		<tr>
				  			<td><span class="txt-toolbar" data-i18n="page4.zj.title10"></span></td>
				  			<td colspan="3"><h:inputText value="#{partProcessGuideUpdateBean.tqp.description}" styleClass="input-toolbar" 
				  				id="zjdes"/></td>
				  		</tr>
				  	</table>
				  	<div class="dialog-bottomBar">
			  			<p:commandButton value="page4.toolbarBottom.btn1" styleClass="btn-toolbar" onclick="AddZJData()"></p:commandButton>
		  				<p:commandButton value="新增" actionListener="#{partProcessGuideUpdateBean.addzj}" 
		  					update=":myform:zj :myform:zjno :myform:zjname :myform:zjiskey :myform:zjsv :myform:zjmaxv :myform:zjminv 
		  					:myform:zjunit :myform:zjto :myform:zjto2 :myform:zjctime :myform:zjctype :myform:zjdes"  
		  					oncomplete="addZJ.hide();translateReady();" id="AddZjBtn" style="display:none;"/>
				  	</div>
				  </p:dialog>
			</div>
	    	<div class="toolbar-bottom">
		    	<p:commandButton value="page4.toolbarBottom.btn1" oncomplete="addZJ.show()" styleClass="btn-toolbar"></p:commandButton>
		    	<p:commandButton value="page4.toolbarBottom.btn2" oncomplete="translateReady();" styleClass="btn-toolbar" actionListener="#{partProcessGuideUpdateBean.deletezj}" update=":myform:zj" />
	    	</div>
	    	<div class="div-conctrl">
	    		<div class="div-conctrl-content">
	    			<p:commandLink id="btn_prev_zj" value="page4.conctrl.btn1" onclick="zjBack()" styleClass="btn-conctrl btn-prev"></p:commandLink>
	    			<p:commandLink value="page4.conctrl.btn2" actionListener="#{partProcessGuideUpdateBean.Save}" 
		    			update=":myform:messages :myform:updateSuccess" styleClass="btn-conctrl btn-save btn-cur" oncomplete="navigation()"></p:commandLink>
			   </div>
	    	</div>
	    	<!-- 返回 -->
	   		<p:commandButton style="display:none" value=" " 
	   			actionListener="#{MenuHeadBean.clickMenu('/mocs/parts/part_process_config.faces','零件配置,零件工序配置')}" 
	   			update=":myform:rightiframe" id="navigation">
	   		</p:commandButton>
	   		<h:inputHidden value="#{partProcessGuideUpdateBean.updateSuccess}" id="updateSuccess"></h:inputHidden>
	    	<p:growl id="messages" showDetail="true"/>
	    </div>
    </div>
	<h:outputScript library="js/admin" name="part_process_guide.js"></h:outputScript>
    <script type="text/javascript">
	//<![CDATA[
		function navigation(){
    		var updateSuccess=document.getElementById("myform:updateSuccess").value;
    	    //alert(updateSuccess);
        	if(updateSuccess=="更新成功"){
        		 document.getElementById("myform:navigation").click();
        	}
		}
		$(document).ready(function() {
			//tab切换
			$(".menu-tabbar").click(function() {
				var id = this.id.replace("btn", "");
				//tab样式
				$("#btn" + id).addClass("act").siblings(".menu-tabbar").removeClass("act");
				//内容样式
				$("#" + id).show().siblings(".processlist-content").hide();
			});
			
			//国际化
			translateReady();
		});
	//]]>
	</script>
</ui:composition>
