<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core">
<h:form id="myform">
<link rel="stylesheet" href="css/common.css" type="text/css"></link>
<link rel="stylesheet" href="css/stat.css" type="text/css"></link>
<link rel="stylesheet" href="css/rich_table_ds.css" type="text/css"></link>
<style type="text/css">
*{margin:0px;}
</style>
<link rel="stylesheet" href="css/product_in_progress_composite.css" type="text/css"></link>
<h:inputHidden value="#{pIpCompositeBean.load}" id="loadtab"></h:inputHidden>
<div class="title-bar">
	<div class="logo-img">
		<img src="images/profile_top_logo.png" />
	</div>
	<div class="title-text">在制品报表</div>
	<div class="filter-frame">
		<div class="filter-bar">
			<div class="filter-label">开始时间:</div>
			<div class="filter-input">
				<rich:calendar id="startTime" popup="true" locale="en" cellWidth="10px" cellHeight="20px" value="#{pIpCompositeBean.startTime}" datePattern="yyyy-MM-dd" />
			</div>
		</div>
		<div class="filter-bar">
			<div class="filter-label">结束时间:</div>
			<div class="filter-input">
				<rich:calendar id="finishTime" popup="true" locale="en" cellWidth="10px" cellHeight="20px" value="#{pIpCompositeBean.endTime}" datePattern="yyyy-MM-dd" />
			</div>
		</div>
	</div>
	<div class="filter-frame2">
		<div class="filter-bar">
			<div class="filter-label">零件名称:</div>
			<div class="filter-input">
				<h:selectOneMenu id="productName" value="#{pIpCompositeBean.procuctSelected}" styleClass="filter-select">
					<f:selectItem itemLabel="--请选择--" itemValue=""></f:selectItem>
					<f:selectItems value="#{pIpCompositeBean.procuctlist}" 
					 var="part"  itemLabel="#{part.name}"  itemValue="#{part.id}"> </f:selectItems>
					<f:ajax event="valueChange" render="batchNo" listener="#{pIpCompositeBean.selectOnChange}" />
				</h:selectOneMenu>
			</div>
		</div>
		<div class="filter-bar">
			<div class="filter-label">批次号:</div>
			<div class="filter-input">
				<h:selectOneMenu id="batchNo" value="#{pIpCompositeBean.batchNoSelected}" styleClass="filter-select">
					<f:selectItem itemLabel="--请选择--" itemValue=""></f:selectItem>
					<f:selectItems value="#{pIpCompositeBean.batchNolist}"
					  var="map"  itemLabel="#{map.batchNo}"  itemValue="#{map.batchNo}" > </f:selectItems>
				</h:selectOneMenu>
			</div>
		</div>
		<div class="filter-bar" id="ctx_group" style="display:none;">
			<div class="filter-label">统计类型</div>
			<div class="filter-input">
				<h:selectOneMenu id="group" disabled="true" onchange="change()" styleClass="filter-select">
					<f:selectItem itemLabel="按零件名" itemValue="1"></f:selectItem>
					<f:selectItem itemLabel="按设备" itemValue="2"></f:selectItem>
				</h:selectOneMenu>
			</div>
		</div>
	</div>
	<div class="filter-submit">
		<h:graphicImage id="submt" alt="search" url="images/jobplan/list/jobpaln_button.png">
			<a4j:ajax listener="#{pIpCompositeBean.SubmitSearch}" event="click" execute="startTime finishTime productName batchNo group" render=":myform:tableTree" oncomplete="searchBtn()"></a4j:ajax>
		</h:graphicImage>
	</div>
</div>
<script language="javascript">
$(".title-bar").css("width", wjb51 + "px").css("height", hjb51 * 280 / 1080 + "px");
$(".logo-img").css("left", wjb51 * 25 / 1920 + "px").css("top", hjb51 * 33 / 1080 + "px").css("width", wjb51 * 229 / 1920 + "px").css("height", hjb51 * 180 / 1080);
$(".title-text").css("left", wjb51 * 300 / 1920 + "px").css("top", hjb51 * 100 / 1080 + "px").css("font-size", hjb51 * 52 / 1080 + "px").css("line-height", hjb51 * 52 / 1080 + "px");
$(".filter-frame").css("left", wjb51 * 650 / 1920 + "px").css("top", hjb51 * 50 / 1080 + "px");
$(".filter-frame2").css("left", wjb51 * 1100 / 1920 + "px").css("top", hjb51 * 50 / 1080 + "px");
$(".filter-bar").css("width", wjb51 * 400 / 1920 + "px").css("height", hjb51 * 42 / 1080 + "px").css("margin-top", hjb51 * 24 / 1080 + "px");
$(".filter-label").css("line-height", hjb51 * 42 / 1080 + "px").css("font-size", hjb51 * 38 / 1080 + "px");
$(".filter-input").css("width", wjb51 * 150 / 1920 + "px").css("height", hjb51 * 42 / 1080 + "px").css("line-height", hjb51 * 42 / 1080 + "px").css("font-size", hjb51 * 20 / 1080 + "px");
$(".filter-input img.rf-cal-btn").css("margin-left", -wjb51 * 45 / 1920 + "px").css("width", wjb51 * 42 / 1920 + "px").css("height", hjb51 * 42 / 1080 + "px");
$(".filter-input .rf-cal-extr").css("width", wjb51 * 150 / 1920 + "px");
$(".filter-submit").css("left", wjb51 * 1613 / 1920 + "px").css("top", hjb51 * 27 / 1080 + "px").css("width", wjb51 * 164 / 1920 + "px").css("height", hjb51 * 164 / 1080 + "px");
</script>

<div class="content-frame">
	<div class="tab-bar">
		<div id="tab-list" class="tab-btn active" onclick="sub('tab1')">批次统计</div>
		<div id="tab-chart" class="tab-btn" onclick="sub('tab2')">工序统计</div>
	</div>
	<div id="list-frame">
		<div class="ui-treetable ui-widget table-title">
			<table style="width: 100%; height: 100%;">
				<tr>
					<th class="ui-state-default" width="25%"><div class="ui-tt-c">零件名称</div></th>
					<th class="ui-state-default" width="15%"><div class="ui-tt-c">批次号</div></th>
					<th class="ui-state-default" width="11%"><div class="ui-tt-c">计划数量</div></th>
					<th class="ui-state-default" width="11%"><div class="ui-tt-c">完成数量</div></th>
					<th class="ui-state-default" width="11%"><div class="ui-tt-c">在制品数量</div></th>
					<th class="ui-state-default" width="10%"><div class="ui-tt-c">开始时间</div></th>
					<th class="ui-state-default" width="10%"><div class="ui-tt-c">结束时间</div></th>
					<th class="ui-state-default" width="7%"><div class="ui-tt-c">操作</div></th>
				</tr>
			</table>
		</div>
		<div class="table-body">
			<p:treeTable value="#{pIpCompositeBean.root}" var="pip" id="tableTree" >
				<p:column style="width:25%;word-break: break-all;">
					<f:facet name="header">
					零件名称
					</f:facet>
					<h:outputText value="#{pip.productName}" />
				</p:column>
				<p:column style="width:15%;word-break: break-all;">
					<f:facet name="header">
						
					</f:facet>
					<h:outputText value="#{pip.orderNo}" />
				</p:column>
				<p:column style="width:11%;word-break: break-all;">
					<f:facet name="header">
						
					</f:facet>
					<h:outputText value="#{pip.planNumber}" />
				</p:column>
				<p:column style="width:11%;word-break: break-all;">
					<f:facet name="header">
						
					</f:facet>
					<h:outputText value="#{pip.offlineNumber}" />
				</p:column>
				<p:column style="width:11%;word-break: break-all;">
					<f:facet name="header">
						
					</f:facet>
					<h:outputText value="#{pip.pipNumber}" />
				</p:column>
					<p:column style="width:10%;word-break: break-all;">
					<f:facet name="header">
						
					</f:facet>
					<h:outputText value="#{pip.planStarttime}" />
				</p:column>
					<p:column style="width:10%;word-break: break-all;">
					<f:facet name="header">
						
					</f:facet>
					<h:outputText value="#{pip.planEndtime}" />
				</p:column>
			
				<p:column style="width:7%;word-break: break-all;">
					<f:facet name="header">
						
					</f:facet>
						<p:commandLink value="详细" onclick="getData('#{pip.productName}')"
							update=":myform:tableTree"  oncomplete="tabChartClick()"></p:commandLink>
				</p:column>
			</p:treeTable>
		</div>
	</div>
	<div id="chart-frame">
		<div id="tab2" style="height: 100%;display: none;">
			<div class="ui-datatable ui-treetable ui-widget table-title">
				<table style="width: 100%; height: 100%;">
					<tr>
						<th class="ui-state-default" width="6%"></th>
						<th class="ui-state-default" width="22%">零件名称</th>
						<th class="ui-state-default" width="15%">批次号</th>
						<th class="ui-state-default" width="15%">工序</th>
						<th class="ui-state-default" width="7%">计划数量</th>
						<th class="ui-state-default" width="7%">完成数量</th>
						<th class="ui-state-default" width="7%">设备</th>
						<th class="ui-state-default" width="7%">人员</th>
						<th class="ui-state-default" width="7%">产量</th>
						<th class="ui-state-default" width="7%">在制品数</th>
					</tr>
				</table>
			</div>
			<div class="table-body" id="divtab2">
			</div>
		</div>
		<div id="tab3" style="height: 100%;display: none;">
			<div class="ui-datatable ui-treetable ui-widget table-title">
				<table style="width: 100%; height: 100%;">
					<tr>
						<th class="ui-state-default" width="6%"></th>
						<th class="ui-state-default" width="22%">设备</th>
						<th class="ui-state-default" width="17%">零件名称</th>
						<th class="ui-state-default" width="15%">工序</th>
						<th class="ui-state-default" width="10%">计划数量</th>
						<th class="ui-state-default" width="10%">完成数量</th>
						<th class="ui-state-default" width="10%">人员</th>
						<th class="ui-state-default" width="10%">产量</th>
					</tr>
				</table>
			</div>
			<div class="table-body" id="divtab3">
			</div>
		</div>
	</div>
</div>
<script language="javascript">
//<![CDATA[	
	$(".content-frame").css("width", wjb51 + "px").css("height", hjb51 * 716 / 1080 + "px");
	$(".tab-bar").css("height", hjb51 * 56 / 1080 + "px");
	$(".tab-btn").css("width", wjb51 * 168 / 1920 + "px").css("font-size", hjb51 * 30 / 1080 + "px").css("line-height", hjb51 * 56 / 1080 + "px");
	$("#list-frame").css("top", hjb51 * 60 / 1080 + "px").css("width", wjb51 + "px").css("height", hjb51 * 656 / 1080 + "px").css("font-size", hjb51 * 30 / 1080 + "px");
	$("#chart-frame").css("left", wjb51 * 168 / 1920 + "px").css("top", "0px").css("width", wjb51 * 168 / 1920 + "px").css("height", hjb51 * 56 / 1080 + "px").css("font-size", hjb51 * 24 / 1080 + "px");
	
	var smallWidth = wjb51 * 168 / 1920;
	var smallHeight = hjb51 * 56 / 1080;
	var bigTop = hjb51 * 60 / 1080;
	var bigWidth = wjb51;
	var bigHeight = hjb51 * 656 / 1080;
	function tabListClick() {
		if($("#tab-list").attr("class") == "tab-btn active") {return;}
		
		$("#tab-list").addClass("active");
		$("#tab-chart").removeClass("active");
	
		$("#list-frame").animate({width: bigWidth + "px", height: bigHeight + "px", left: "0px", top: bigTop + "px"}, 200);
		$("#chart-frame").animate({width: smallWidth + "px", height: smallHeight + "px", left: smallWidth + "px", top: "0px"}, 200);
	}
	function tabChartClick() {
		if($("#tab-chart").attr("class") == "tab-btn active") {return;}
		
		$("#tab-list").removeClass("active");
		$("#tab-chart").addClass("active");
		
		$("#list-frame").animate({width: smallWidth + "px", height: smallHeight + "px", left: "0px", top: "0px"}, 200);
		$("#chart-frame").animate({width: bigWidth + "px", height: bigHeight + "px", left: "0px", top: bigTop + "px"}, 200);
		document.getElementById("tab2").style.display = "block";
		document.getElementById("tab3").style.display = "block";
	}
	$("#tab-list").click(function() {
		tabListClick();
	});
	$("#tab-chart").click(function() {
		tabChartClick();
	});

	searchBtn();
	
	//获取工序统计数据
	function loadAjaxData(){
		$.ajax({ 
			url: "./productInProgress/getReportData.action", 
			dataType: "json",//返回json格式的数据
			success: function(responseText){
				var obj = responseText;
				$('#divtab2').html(drawTable(obj));
		  	},
		  	complete:function(){
		  		loadClickEvent();
		  	}
		});
	}
	
	//工序统计零件生成 
	function drawTable(obj){
		var trs="";
		var beginTable = "<div class='ui-datatable ui-treetable ui-widget' style='margin-top: 6px;'><table id='detail_table' class='detail' border='0' cellspacing='0' cellpadding='0' width='100%'>"
		+"<thead>"
		+"<tr>"
				+"<th class='ui-state-default' width='6%'>&nbsp;</th>"
				+"<th class='ui-state-default' width='22%'>&nbsp;</th>"
				+"<th class='ui-state-default' width='15%'>&nbsp;</th>"
				+"<th class='ui-state-default' width='15%'>&nbsp;</th>"
				+"<th class='ui-state-default' width='7%'>&nbsp;</th>"
				+"<th class='ui-state-default' width='7%'>&nbsp;</th>"
				+"<th class='ui-state-default' width='7%'>&nbsp;</th>"
				+"<th class='ui-state-default' width='7%'>&nbsp;</th>"
				+"<th class='ui-state-default' width='7%'>&nbsp;</th>"
				+"<th class='ui-state-default' width='7%'>&nbsp;</th>"
			+"</tr>"
		+"</thead>"
		+"<tbody id='tbody' class='ui-treetable-data ui-widget-content'>";
		var data = obj.data;
		var size = data.length;
		var rowid = 0;
		for(var i=0;i<size;i++){
			var info = data[i];
			if(info.partName != ""){
		 	  	if(i>0){
				 	if(info.partName == data[i-1].partName){
				 		if(info.taskNum != data[i-1].taskNum){
				 			rowid = i;
				 			start="<tr class='parent ui-widget-content default' id='row"+i+"' title='点击这里展开/关闭' style='cursor: pointer;'>"
			 				+"<td style='width:6%;word-break: break-all;'><div class='ui-tt-c'>+/-</div></td>"
			 				part ="<td style='vertical-align:top;border-top: none; border-bottom: none;'><div class='ui-tt-c'>&nbsp;</div></td>";
				 		}else{
					 		start="<tr class='child-row"+rowid+" ui-widget-content default' style='display: none;'>"
						 	  	+"<td style='border-top: none; border-bottom: none;'><div class='ui-tt-c'></div></td>";
					 		part="<td style='vertical-align:top;border:none;'><div class='ui-tt-c'>&nbsp;</div></td>";
				 		}
				 	}else{
				 		rowid = i;
				 		start="<tr class='parent ui-widget-content default' id='row"+i+"' title='点击这里展开/关闭' style='cursor: pointer;'>"
			 				+"<td style='width:6%;word-break: break-all;'><div class='ui-tt-c'>+/-</div></td>"
				 		part ="<td style='vertical-align:top;width:22%;word-break: break-all;'><div class='ui-tt-c'>"+info.partName+"</div></td>";
				 	}
				 	if(info.taskNum == data[i-1].taskNum){
				 		taskNum="<td style='border-top: none; border-bottom: none;'><div class='ui-tt-c'>&nbsp;</div></td>";
		 	  		}else{
		 	  			taskNum="<td style='width:15%;word-break: break-all;'><div class='ui-tt-c'>"+info.taskNum+"</div></td>";
		 	  		}
				 	if(info.processName == data[i-1].processName){
				 		process="<td style='border-top: none; border-bottom: none;'><div class='ui-tt-c'>&nbsp;</div></td>";
				 		planNum = "<td style='border-top: none; border-bottom: none;'><div class='ui-tt-c'>&nbsp;</div></td>";
				 		finish = "<td style='border-top: none; border-bottom: none;'><div class='ui-tt-c'>&nbsp;</dvi></td>";
				 	}else{
				 		process="<td><div class='ui-tt-c'>"+info.processName+"</div></td>";
				 		planNum = "<td><div class='ui-tt-c'>"+info.planNum+"</div></td>";
				 		finish = "<td><div class='ui-tt-c'>"+info.finishNum+"</div></td>";
				 	}
		 	  	}else{
		 	  		start = "<tr class='parent ui-widget-content default' id='row"+i+"' style='cursor: pointer;'>"
		 				+"<td style='width:6%;word-break: break-all;'><div class='ui-tt-c'>+/-</div></td>"
		 	  		part ="<td style='vertical-align:top;width:22%;word-break: break-all;'><div class='ui-tt-c'>"+info.partName+"</div></td>";
		 	  		taskNum = "<td style='width:15%;word-break: break-all;'><div class='ui-tt-c'>"+info.taskNum+"</div></td>";
		 	  		process="<td style='width:15%;word-break: break-all;'><div class='ui-tt-c'>"+info.processName+"</div></td>";
		 	  		planNum = "<td style='width:7%;word-break: break-all;'><div class='ui-tt-c'>"+info.planNum+"</div></td>";
		 	  		finish = "<td style='width:7%;word-break: break-all;'><div class='ui-tt-c'>"+info.finishNum+"</div></td>";
		 	  	}
		 		end ="<td style='width:7%;word-break: break-all;'><div class='ui-tt-c'>"+info.equSerialNo+"</div></td>"
	 				+"<td style='width:7%;word-break: break-all;'><div class='ui-tt-c'></div></td>"
	 				+"<td style='width:7%;word-break: break-all;'><div class='ui-tt-c'></div></td>";
	 			if(info.processName=="")
	 				workInNum = "<td style='width:7%;word-break: break-all;'><div class='ui-tt-c'>"+info.workInNum+"</div></td>"
	 			else
	 				workInNum = "<td style='width:7%;word-break: break-all;'><div class='ui-tt-c'>/</div></td>"
		 		trend = "</tr>";
		 		trs += start+part+taskNum+process+planNum+finish+end+workInNum+trend;
			}
		}
		
		var tbody = trs;
		var endTable = "</tbody>"
					+"</table></div>";
		return beginTable+tbody+endTable;
	}
	
	//伸缩表格动作事件
	function loadClickEvent(){
		$('tr.parent')
		.css("cursor","pointer")
		.attr("title","点击这里展开/关闭")
		.click(function(){
			$(this).siblings('.child-'+this.id).toggle();
		});
	}
	
	//tab标签点击事件
	function sub(tt){
		if("tab1"==tt){
			document.getElementById("myform:loadtab").value="tab1";
			document.getElementById("tab2").style.display = "none";
			document.getElementById("tab3").style.display = "none";
			document.getElementById("myform:group").disabled=true;
			document.getElementById("ctx_group").style.display="none";
		}else{
			document.getElementById("myform:loadtab").value="tab2";
			document.getElementById("tab2").style.display = "block";
			document.getElementById("tab3").style.display = "block";
			document.getElementById("myform:group").value=1;
			document.getElementById("myform:group").disabled=false;
			document.getElementById("ctx_group").style.display="block";
			loadAjaxData();
		}
		document.getElementById("myform:submt").click();
	}
	
	//获取批次统计详细内容
	function getData(productName){
		$.ajax({
			url: "./productInProgress/getDataByproductName.action", 
			type:"post",
			data:{partName:productName},
			dataType: "json",//返回json格式的数据
			success: function(responseText){
				var obj = responseText;
				$('#divtab2').html(drawTable(obj));
		  	},
		  	complete:function(){
		  		loadClickEvent();
		  	}
		});
	}
	
	//切换工序统计类型
	function change(){
		var loadtab=document.getElementById("myform:loadtab").value;
		
		var group = document.getElementById("myform:group").value;
		if(group == 1){
			document.getElementById("tab3").style.display="none";
			document.getElementById("tab2").style.display="block";
			var sTime = document.getElementById("myform:startTimeInputDate").value;
			var eTime = document.getElementById("myform:finishTimeInputDate").value;
			var partName = document.getElementById("myform:productName").value;
			var batchNo = document.getElementById("myform:batchNo").value;
			$.ajax({ 
				url: "./productInProgress/getReportData.action", 
				data:{descParam:"",startTime:sTime,endTime:eTime,partName:partName,batchNo:batchNo},
				dataType: "json",//返回json格式的数据
				success: function(responseText){
					var obj = responseText;
					$('#divtab2').html(drawTable(obj));
			  	},
			  	complete:function(){
			  		loadClickEvent();
			  	}
			});
		}else{
			document.getElementById("tab2").style.display="none";
			document.getElementById("tab3").style.display="block";
			$.ajax({ 
				url: "./productInProgress/getReportData.action", 
				data:{descParam:"",startTime:sTime,endTime:eTime,partName:partName,batchNo:batchNo},
				data:{descParam:"equ_job.equSerialNo"},
				dataType: "json",//返回json格式的数据
				contentType: 'application/json;charset=utf-8',
				success: function(responseText){
					var obj = responseText;
					$('#divtab3').html(drawTable1(obj));
				
			  	},
			  	complete:function(){
			  		loadClickEvent();
			  	}
			});
		}
	}

	//工序统计设备生成 
	function drawTable1(obj){
		var trs="";
		var beginTable = "<div class='ui-datatable ui-treetable ui-widget' style='margin-top: 6px;'><table id='detail_table_equ' class='detail' border='0' cellspacing='0' cellpadding='0' width='100%'>"
		+"<thead>"
		+"<tr>"
			+"<th class='ui-state-default' width='6%'>&nbsp;</th>"
			+"<th class='ui-state-default' width='22%'>&nbsp;</th>"
			+"<th class='ui-state-default' width='17%'>&nbsp;</th>"
			+"<th class='ui-state-default' width='15%'>&nbsp;</th>"
			+"<th class='ui-state-default' width='10%'>&nbsp;</th>"
			+"<th class='ui-state-default' width='10%'>&nbsp;</th>"
			+"<th class='ui-state-default' width='10%'>&nbsp;</th>"
			+"<th class='ui-state-default' width='10%'>&nbsp;</th>"
		+"</tr>"
		+"</thead>"
		+"<tbody id='tbody' class='ui-treetable-data ui-widget-content'>";
		var data = obj.data;
		var size = data.length;
		var rowid = 0;
		for(var i=0;i<size;i++){
			var info = data[i];
		 	  	if(i>0){
		 	  		if(info.equSerialNo == data[i-1].equSerialNo){
		 	  			start="<tr class='child-row"+rowid+" ui-widget-content default' style='display: none;'>"
			 				+"<td style='border-top: none; border-bottom: none;'><div class='ui-tt-c'></div></td>";
		 				equSerialNo ="<td style='vertical-align:top;border-top: none; border-bottom: none;'><div class='ui-tt-c'>&nbsp;</div></td>";
		 	  		}else{
		 	  			rowid=i;
		 	  			start = "<tr class='parent ui-widget-content default' id='row"+i+"' title='点击这里展开/关闭' style='cursor: pointer;'>"
			 				+"<td style='width:6%;word-break: break-all;'><div class='ui-tt-c'>+/-</div></td>";
			 			equSerialNo = "<td style='vertical-align:top;'><div class='ui-tt-c'>"+info.equSerialNo+"</div></td>";
		 	  		}
		 	  		if(info.partName == data[i-1].partName && info.equSerialNo == data[i-1].equSerialNo){
		 	  			part ="<td style='border-top: none; border-bottom: none;'><div class='ui-tt-c'>&nbsp;</div></td>";
		 	  		}else{
		 	  			part="<td><div class='ui-tt-c'>"+info.partName+"</div></td>";
		 	  		}
		 	  		if(info.equSerialNo == data[i-1].equSerialNo && info.partName == data[i-1].partName && info.processName == data[i-1].processName){
// 		 	  		if(info.equSerialNo == data[i-1].equSerialNo && info.processName == data[i-1].processName){
		 	  			processName = "<td style='border-top: none; border-bottom: none;'><div class='ui-tt-c'>&nbsp;</div></td>";
		 	  			plan_finish="<td style='border-top: none; border-bottom: none;'><div class='ui-tt-c'>&nbsp;</div></td>"
			 			+"<td style='border-top: none; border-bottom: none;'><div class='ui-tt-c'>&nbsp;</div></td>"
		 	  		}else{
		 	  			processName="<td><div class='ui-tt-c'>"+info.processName+"</div></td>";
		 	  			plan_finish="<td><div class='ui-tt-c'>"+info.planNum+"</div></td>"
			 			+"  <td><div class='ui-tt-c'>"+info.finishNum+"</div></td>"
		 	  		}
		 	  	}else{
		 	  		rowid=i;
		 	  		start = "<tr class='parent ui-widget-content default' id='row"+i+"' title='点击这里展开/关闭' style='cursor: pointer;'>"
		 				+"<td style='width:6%;word-break: break-all;'><div class='ui-tt-c'>+/-</div></td>";
	 				equSerialNo = "<td style='width:22%;word-break: break-all;'><div class='ui-tt-c'>"+info.equSerialNo+"</div></td>";
		 	  		part ="	<td style='width:17%;word-break: break-all;'><div class='ui-tt-c'>"+info.partName+"</div></td>";
		 	  		processName="<td style='width:15%;word-break: break-all;'><div class='ui-tt-c'>"+info.processName+"</div></td>";
		 	  		plan_finish="<td style='width:10%;word-break: break-all;'><div class='ui-tt-c'>"+info.planNum+"</div></td>"
		 			+"<td style='width:10%;word-break: break-all;'><div class='ui-tt-c'>"+info.finishNum+"</div></td>"
		 	  	}
		 		end ="<td style='width:10%;word-break: break-all;'><div class='ui-tt-c'></div></td>"
		 			+"<td style='width:10%;word-break: break-all;'><div class='ui-tt-c'></div></td>"
		 		+"</tr>";
		 		trs += start+equSerialNo+part+processName+plan_finish+end;
		}
		
		var tbody = trs;
		var endTable = "</tbody>"
					+"</table></div>";
		return beginTable+tbody+endTable;
	}
//]]>
</script>
	
</h:form>
</ui:composition>