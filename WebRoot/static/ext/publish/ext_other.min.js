function SelectBoxClass(){function a(a,c){b();for(var d=a.split(","),e=d.length,f=0;e>f;f++)$("input[type='checkbox'][name='"+c+"'][value='"+d[f]+"']").attr("checked",!0)}function b(a){$("input[type='checkbox'][name='"+a+"']").each(function(){this.checked=!1})}function c(a){var b="";return $("input[type='checkbox'][name='"+a+"']").each(function(){this.checked&&(b=b+","+this.value)}),b.length>1&&(b=b.substring(1)),b}function d(a){var b="",c="";return $("input[type='checkbox'][name='"+a+"']").each(function(){this.checked&&(c=$(this).next(),b=b+","+c.text())}),b.length>1&&(b=b.substring(1)),b}this.selectedElement=null,this.state=!1,this.name="",this.name_hdn="",this.cssid="",this.changeListState=function(c,d,e){this.name=d.name,this.name_hdn="#"+this.name+"_hdn";var f=c?c:window.event;this.selectedElement=f.srcElement||f.target,this.cssid="#"+e,$(this.cssid).css("left",this.selectedElement.offsetLeft+"px"),$(this.cssid).css("top",this.selectedElement.offsetTop+24+"px");var g=$(this.cssid).css("display");$(this.cssid).css("display","block"==g?"none":"block"),"block"==$(this.cssid).css("display")?a($(this.name_hdn).val(),this.name):b()},this.changeSelected=function(){$(this.name_hdn).val(c(this.name)),this.selectedElement.value=d(this.name)},this.hiddenList=function(){this.state||($(this.cssid).hide("fast"),b(this.name))},this.onkeyup=function(a){var b=a.value,c=a.name;"select_box_job_part"==c||"select_box_part"==c?getPartInfo(b,c):"select_box_job_taskNum"==c?Ext.Ajax.request({url:"./jobplan/getTaskNumList.action",method:"post",params:{taskNum:b},success:function(a){var b=Ext.decode(a.responseText),c=b.length;if(c>0){$("#table_job_taskNum").empty();for(var d=0;c>d;d++){var e=b[d],f="<tr><td style='width:180px;'><label><input type='checkbox' name='select_box_job_taskNum' onclick='s.changeSelected(this,event);' value='"+e.value+"' onblur='s.hiddenList()'/><span>"+e.Name+"</span></label></td></tr>";$("#table_job_taskNum").append(f)}}},failure:function(){}}):"select_box_job_equName"==c?Ext.Ajax.request({url:"./jobplan/getequNameList.action",method:"post",params:{equName:b},success:function(a){var b=Ext.decode(a.responseText),c=b.length;if(c>0){$("#table_job_equName").empty();for(var d=0;c>d;d++){var e=b[d],f="<tr><td style='width:180px;'><label><input type='checkbox' name='select_box_job_equName' onclick='s.changeSelected(this,event);' value='"+e.Id+"' onblur='s.hiddenList()'/><span>"+e.equName+"</span></label></td></tr>";$("#table_job_equName").append(f)}}},failure:function(){}}):"select_box_No"==c?$.ajax({url:"./jobplan/getequSerialNoList.action",method:"post",dataType:"json",data:{equSerialNo:b},success:function(a){var b=a,c=b.length;if(c>0){$("#table_No").empty();for(var d=0;c>d;d++){var e=b[d],f="<tr><td style='width:230px;'><label><input type='checkbox' name='select_box_No' onclick='s.changeSelected(this,event);' value='"+e.id+"' onblur='s.hiddenList()'/><span>"+e.no+"</span></label></td></tr>";$("#table_No").append(f)}}},error:function(){}}):"select_box_Name"==c&&$.ajax({url:"./jobplan/getequNameWithoutNodeList.action",method:"post",dataType:"json",data:{equName:b},success:function(a){var b=a,c=b.length;if(c>0){$("#table_Name").empty();for(var d=0;c>d;d++){var e=b[d],f="<tr><td style='width:230px;'><label><input type='checkbox' name='select_box_Name' onclick='s.changeSelected(this,event);' value='"+e.id+"' onblur='s.hiddenList()'/><span>"+e.name+"</span></label></td></tr>";$("#table_Name").append(f)}}},error:function(){}})},this.hiddenDiv=function(a){var b,c={},d=navigator.userAgent.toLowerCase();(b=d.match(/msie ([\d.]+)/))?c.ie=b[1]:(b=d.match(/firefox\/([\d.]+)/))?c.firefox=b[1]:(b=d.match(/chrome\/([\d.]+)/))?c.chrome=b[1]:(b=d.match(/opera.([\d.]+)/))?c.opera=b[1]:(b=d.match(/version\/([\d.]+).*safari/))?c.safari=b[1]:0,document.getElementById(a.id).onmouseout=c.ie?function(a){a=a||window.event;var b=a.toElement;this.contains(b)||(this.style.display="none")}:c.firefox?function(a){var b=a.relatedTarget;this.contains(b)||(this.style.display="none")}:c.chrome?function(a){a=a||window.event;var b=a.toElement;this.contains(b)||(this.style.display="none")}:c.safari?function(a){a=a||window.event;var b=a.relatedTarget;this.contains(b)||(this.style.display="none")}:function(a){a=a||window.event;var b=a.toElement;this.contains(b)||(this.style.display="none")}}}function getPartInfo(a,b){Ext.Ajax.request({url:"./jobplan/getPartList.action",method:"post",params:{partName:a},success:function(a){var c=Ext.decode(a.responseText),d=c.length;if(d>0)if("select_box_job_part"==b){$("#table_job_part").empty();for(var e=0;d>e;e++){var f=c[e],g="<tr><td style='width:180px;'><label><input type='checkbox' name='select_box_job_part' onclick='s.changeSelected(this,event);' value='"+f.id+"' onblur='s.hiddenList()'/><span>"+f.name+"</span></label></td></tr>";$("#table_job_part").append(g)}}else if("select_box_part"==b){$("#table_part").empty();for(var e=0;d>e;e++){var f=c[e],g="<tr><td style='width:180px;'><label><input type='checkbox' name='select_box_part' onclick='s.changeSelected(this,event);' value='"+f.id+"' onblur='s.hiddenList()'/><span>"+f.name+"</span></label></td></tr>";$("#table_part").append(g)}}},failure:function(){}})}var ExampleDefaults={width:800,height:400};Ext.onReady(function(){window.top!==window&&Ext.getBody().addCls("bry-examples-framed")});var s=new SelectBoxClass;!function(a){a.fn.selectboxs=function(){var b=a(this).attr("id"),c=b+"_hdn",d=b+"_list",e="<input type='hidden' name='"+c+"' id='"+c+"'>";e+="<input type='text' autocomplete='off' name='"+b+"' class='t_selected' onclick=s.changeListState(event,this,'"+d+"'); id='input' onmouseover='s.state=true;' onmouseout='s.state=false;' onblur='s.hiddenList()' onkeyup='s.onkeyup(this)'/>",e+="<div class='t_select_list_table' id='"+d+"' onmouseover='s.state=true;' onmouseout='s.state=false;s.hiddenDiv(this)'>";var f=a(this).html();e+=f+"</div>",a(this).html(""),a(this).append(e)}}(jQuery);