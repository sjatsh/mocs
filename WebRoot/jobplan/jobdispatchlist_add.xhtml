<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui">

<h:head>
<link rel="stylesheet" href="./css/jobdispatchlist_add.css" type="text/css"></link>
<style type="text/css">
* {
	padding: 0px;
	margin: 0px;
	font-family:"微软雅黑";
	color: #595959;
	font-weight:bold;
}

</style>
</h:head>		

<h:body>
	<h:form id="myform">
	 <h:inputHidden id="pdpd" value="#{JobdispatchlistAdd.dialog}" />
	 <div style="width: 1550px;">
	 	<div style="width:1550px;margin-left: 20px;">
	 		<div style="width:1550px;margin-top:55px;" align="center">
	 			<h:outputText value="工单创建" style="font-size:43px;font-weight: bold;"/>
	 		</div>
	 		<table style="width:1550px;margin-top: 69px;">
	 			<tr>
	 				<td style="height: 130px;width: 780px;">
	 					<h:outputText value="工单名称" styleClass="font"/>
	 					<h:inputText id="jobdispatchlistName" value="#{JobdispatchlistAdd.jobdispatchlistName}" styleClass="input" style="margin-left:23px;font-size: 24px;"/> 
	 					<h:message for="jobdispatchlistName" style="color:red" /><br/>
						<h:outputText value="工单编号" styleClass="font" />
						<h:inputText id="jobdispatchlistNo" value="#{JobdispatchlistAdd.jobdispatchlistNo}" styleClass="input" style="margin-left:23px;margin-top:17px;font-size: 24px;" /> 
						<h:message for="jobdispatchlistNo" style="color:red" />
	 				</td>
	 				<td style="width: 740px;">
	 					<h:outputText value="作业名称" styleClass="font"/>
	 					<h:selectOneMenu id="jobplanId" value="#{JobdispatchlistAdd.jobplanId}" required="true"
							requiredMessage="不能为空" styleClass="selectChang" style="margin-left:23px;">
							<f:selectItem itemLabel="请选择" itemValue=""></f:selectItem>
							<f:selectItems value="#{JobdispatchlistAdd.jobplanMap}"></f:selectItems>
							<a4j:ajax event="change" listener="#{JobdispatchlistAdd.getJobInfoSub}"
								render=":myform:area_one :myform:area_two :myform:area_three :myform:area_four :myform:area_three_two :myform:startdispatchtime :myform:area_jobnum" execute="@this" />
						</h:selectOneMenu> 
						<h:message for="jobplanId" style="color:red"/><br/>
						
						<h:outputText value="数量" styleClass="font" style="float:left;margin-top:17px;"/>
						<h:inputText id="jobdispatchlistNum" value="#{JobdispatchlistAdd.jobdispatchlistNum}" onblur="datatest();" styleClass="inputduan" 
							style="float:left;margin-top:17px;margin-left:23px;font-size:24px;"/> 
						<h:message for="jobdispatchlistNum" style="color:red" />
						<h:outputText value="数量应小于" styleClass="font" style="float:left;margin-top:17px;margin-left:23px;"/>
						<rich:panel id="area_jobnum" style="width:183px;border:0px;float:left;margin-top:5px;margin-left:18px;">
                           <h:inputText style="font-size:24px;" id="jobNum" value="#{JobdispatchlistAdd.jobNum}" styleClass="inputduan" />
                        </rich:panel>
	 				</td>
	 			</tr>
	 			<tr>
	 				<td style="height: 240px;vertical-align: top;">
	 					<div style="height: 30px;width: 780px;"></div>
	 					<div class="menuleft">
							 <h:outputText value="设备信息"  style="font-size:22px;color:white;"/>
						</div>
						<div style="width: 780px;">
							<rich:panel id="area_one" style="width: 780px;border:0px;">
								<h:inputHidden id="planId" value="#{JobdispatchlistAdd.planId}" />
								<h:inputHidden id="theoryWorktime" value="#{JobdispatchlistAdd.theoryWorktime}" />
								<table style="width: 780px;">
									<tr>
										<td style="width:135px;height: 60px;">
											<h:outputText value="设备类型" styleClass="font"/>
										</td>
										<td style="width:300px;">
											<h:selectOneMenu id="equipmentTypeId" value="#{JobdispatchlistAdd.equipmentTypeId}" styleClass="selectduan">
												<f:selectItem itemLabel="请选择" itemValue=""></f:selectItem>
												<f:selectItems value="#{JobdispatchlistAdd.equipmentTypeMap}"></f:selectItems>
												<a4j:ajax event="change" listener="#{JobdispatchlistAdd.getEquipmentTypeSub}" render=":myform:equipmentId" execute="@this" />
											</h:selectOneMenu> 
											<h:message for="equipmentTypeId" style="color:red" />	
										</td>
										<td style="width:335px;">
											<h:commandButton value="检查刀夹具计划" styleClass="botton" style="font-size: 21px;color: white;background-color: rgb(0,160,64);background-position: 0px -10px;" />		
										</td>
									</tr>
									<tr>
										<td style="width:135px;height: 60px;">
											<h:outputText value="设备名称" styleClass="font"/>
										</td>
										<td>
											<h:selectOneMenu id="equipmentId" value="#{JobdispatchlistAdd.equipmentId}" styleClass="selectduan">
												<f:selectItem itemLabel="请选择" itemValue=""></f:selectItem>
												<f:selectItems value="#{JobdispatchlistAdd.equipmentMap}"></f:selectItems>
											</h:selectOneMenu> 
											<h:message for="equipmentId" style="color:red" />
										</td>
										<td>
											<h:commandButton value="检查设备计划"  styleClass="botton" style="font-size: 21px;color: white;background-color: rgb(0,160,64);background-position: 0px -10px;" />	
							    		</td>
									</tr>
								</table>
							 </rich:panel>
						</div>
						
	 				</td>
	 				<td>
	 					<div style="height: 30px;width: 740px;"></div>
	 					<div class="menuright">
							 <h:outputText value="物料信息"  style="font-size:22px;color:white;"/>
						</div>
						<rich:panel id="area_two"  style="width:655px;height:135px;border:0px;margin-top:16px;">   
							<div style="width:655px;height:135px;border:1px black solid;">
							     <h:dataTable id="materailType" value="#{JobdispatchlistAdd.materailTypelist}" rows="10"	cellpadding="0" cellspacing="0"
									 columnClasses="datatable_column" headerClass="hdts1" rowClasses="datatable_row"  var="record" 
									 style="width:655px;border:1px black solid;">
						             <h:column>
										<f:facet name="header">
											<h:outputText value="序号" />
										</f:facet>
										<h:outputText value="#{record.tid}"></h:outputText>
									</h:column>
									<h:column >
										<f:facet name="header">
											<h:outputText value="需求物料编号" />
										</f:facet>
										<h:outputText value="#{record.tno}"></h:outputText>
									<ui:remove>	
										<h:commandLink value="#{record.no}" style="font-size: 24px;font-weight: bold;text-decoration:none;"> 
											<a4j:ajax listener="#{JobdispatchlistAdd.searNoVal(record.jobNo)}" 
												event="click" render=":myform" />
										</h:commandLink>
									</ui:remove>	
									</h:column>
									<h:column>
										<f:facet name="header">
											<h:outputText value="需求物料名称" />
										</f:facet>
										<h:outputText value="#{record.tname}"></h:outputText>
									</h:column>
									<h:column>
										<f:facet name="header">
											<h:outputText value="数量" />
										</f:facet>
										<h:outputText value="#{record.requirementNum}"></h:outputText>
									</h:column>
								</h:dataTable>
							</div>
							<div style="width: 740px;margin-top: 15px;">
								<p:selectManyCheckbox value="#{JobdispatchlistAdd.checkBoxValue}" style="float:left;font-size:17px;margin-left:40px;">  
					            	<f:selectItem itemLabel="依赖前工单" itemValue="依赖前工单" />  
					           	 	<f:selectItem itemLabel="流转下道工序" itemValue="流转下道工序" />   
					       		</p:selectManyCheckbox> 
						     	<h:commandButton value="检查物料计划"  styleClass="botton" style="float:left;font-size: 21px;color: white;
						     		background-color: rgb(0,160,64);background-position: 0px -10px;margin-left:120px;"/>	
							</div>
					   </rich:panel>
	 				</td>
	 			</tr>
	 			<tr>
	 				<td style="height: 173px;vertical-align: top;">
	 					<div style="width: 100%;height: 20px;"></div>
	 					<div class="menuleft">
							 <h:outputText value="零件类型详情"  style="font-size:22px;color:white;"/>
						</div>
						<rich:panel id="area_three_two" style="border:0px;padding: 0px;margin: 0px;">
							<div style="width: 780px;margin-top:20px;">
								<h:outputText value="零件编号" styleClass="font"/>
								<h:inputText id="partId" value="#{JobdispatchlistAdd.partId}" styleClass="inputzhong" style="margin-left:20px;font-size:26px;"/> 
								<h:message for="partId" style="color:red" />
								<br/>	
								<h:outputText value="零件名称" styleClass="font"/>
								<h:inputText id="partName" value="#{JobdispatchlistAdd.partName}" styleClass="inputzhong" style="margin-left:20px;margin-top:20px;font-size:26px;"/> 
								<h:message for="partName" style="color:red" />
								<h:commandButton value="跳转" styleClass="botton" style="font-size: 21px;color: white;
							     		background-color: rgb(0,160,64);background-position: 0px -10px;margin-left:91px;"/>
							</div>
						</rich:panel>
	 				</td>
	 				<td style="vertical-align: top;">
	 					<div style="width: 100%;height: 20px;"></div>
	 					<div class="menuright">
							 <h:outputText value="始末时间"  style="font-size:22px;color:white;"/>
						</div>
						<rich:panel id="startdispatchtime" style="width: 740px;border:0px;margin-top:20px;">
						    <rich:calendar id="jobdispatchlistStartDate" popup="true" required="true" requiredMessage="不能为空"  locale="en"
								inputClass="time" value="#{JobdispatchlistAdd.jobdispatchlistStartDate}" datePattern="yyyy-MM-dd" 
								cellWidth="10px" cellHeight="20px" />
							<h:message for="jobdispatchlistStartDate" style="color:red"  />	
							<rich:calendar id="jobdispatchlistEndDate" popup="true" required="true" requiredMessage="不能为空" styleClass="calendar_start" locale="en"
								inputClass="time" value="#{JobdispatchlistAdd.jobdispatchlistEndDate}" datePattern="yyyy-MM-dd" 
								cellWidth="10px" cellHeight="20px" style="margin-left:40px;"/>
							<h:message for="jobdispatchlistEndDate" style="color:red"  /><br/>
						    <h:commandButton value="智能分配" styleClass="botton" style="font-size: 21px;color: white;
						     		background-color: rgb(0,160,64);background-position: 0px -10px;margin-left:480px;margin-top:20px;"/>	
						</rich:panel>
	 				</td>
	 			</tr>
	 			<tr>
	 				<td style="height: 320px;vertical-align: top;">
	 					<div class="menuleft">
							 <h:outputText value="工艺详情"  style="font-size:22px;color:white;"/>
						</div>
						<rich:panel id="area_three" style="border:0px;padding: 0px;margin: 0px;">
							<div style="width: 780px;">
							    <h:outputText value="设备名称" styleClass="font"/>
								<h:inputText id="processplanName" value="#{JobdispatchlistAdd.processplanName}" styleClass="inputzhong" style="margin-left:20px;margin-top:20px;font-size:26px;"/> 
								<h:message for="processplanName" style="color:red" />
							    <h:outputText value="默认方案" styleClass="font" style="margin-left:20px;"/>
								<h:inputText id="processplanDefault" value="#{JobdispatchlistAdd.processplanDefault}" styleClass="inputzhong" style="margin-left:20px;font-size:26px;"/> 
								<h:message for="processplanDefault" style="color:red" />
								<br/>	
								<h:outputText value="节拍时间" styleClass="font"/>
								<h:inputText id="processplanTheoryWorktime" value="#{JobdispatchlistAdd.processplanTheoryWorktime}" styleClass="inputzhong" style="margin-left:20px;margin-top:20px;font-size:26px;"/>
								<h:message for="processplanTheoryWorktime" style="color:red"  />	
								<br/>	
								<h:outputText value="指导文件" styleClass="font"/>
								<h:inputText id="processplanFile" value="#{JobdispatchlistAdd.processplanFile}" styleClass="inputzhong" style="margin-left:20px;margin-top:20px;font-size:26px;"/> 
								<h:message for="processplanFile" style="color:red" />	
								<h:commandButton value="跳转" styleClass="botton" style="font-size: 21px;color: white;
							     		background-color: rgb(0,160,64);background-position: 0px -10px;margin-left:90px;"/>
						    </div>
						    <div style="width: 780px;margin-top: 50px;height: 130px;">
						    	<h:commandButton value=" " style="float:left;background-image: url(./images/daying.png);height:55px;width:55px;
						    		background-color:white;border:0px;margin-left:20px;"   />
								<div style="width: 170px;height: 20px;float: left;"/>
								<ui:remove>
								<h:commandButton value=" " id="jobdispatchlist_bottom_button" style="float:left;background-image: url(./images/zyjhkz_save.png);height:55px;width:55px;background-color:white;border:0px;">
									<a4j:ajax listener="#{JobdispatchlistAdd.addJobdispatchlist}" event="click" execute="@all" render=":myform" />
								</h:commandButton>
								</ui:remove>
								<p:commandButton  oncomplete="window.opener.location.href=window.opener.location.href;window.close();"
								       value="" actionListener="#{JobdispatchlistAdd.addJobdispatchlist}" style="float:left;border:0;width:55px;height:55px; background-image: url('./images/zyjhkz_save.png');background-color: white;" />
								<div style="width: 170px;height: 20px;float: left;"/>
								<h:commandButton value=" "  immediate="true" onclick="window.close();"  style="float:left;background-image: url(./images/zyjhkz_qx.png);height:55px;width:55px;background-color:white;border:0px;"   />
						    </div> 
						</rich:panel>
	 				</td>
	 				<td style="vertical-align: top;">
	 					<div class="menuright">
							 <h:outputText value="生产作业详情"  style="font-size:22px;color:white;"/>
						</div>
						<rich:panel id="area_four" style="border:0px;padding: 0px;margin: 0px;">
							<div>
	      						<h:outputText value="生产数量" styleClass="font"/>
								<h:inputText id="subjobplanNum" value="#{JobdispatchlistAdd.subjobplanNum}" styleClass="inputzhong" style="margin-top:20px;margin-left:20px;font-size:26px;"/> 
								<h:message for="subjobplanNum" style="color:red" />        
						        <p:selectBooleanCheckbox value="#{JobdispatchlistAdd.booleanValue}" style="margin-left:160px;" /> 
						        <h:outputText value="禁止拆分" styleClass="font"/> 	
						        <br/><br/>
								<h:outputText value="始末时间" styleClass="font" />	
							    <rich:calendar id="subjobplanStartDate" popup="true" styleClass="calendar_start" locale="en"
									inputClass="timezhong" value="#{JobdispatchlistAdd.subjobplanStartDate}" datePattern="yyyy-MM-dd" 
									cellWidth="10px" cellHeight="20px"  style="margin-left:20px;"/>
									<h:message for="subjobplanStartDate" style="color:red"  />	
								<h:outputText value="至" styleClass="font" style="margin-left:20px;"/>
								<rich:calendar id="subjobplanEndDate" popup="true" styleClass="calendar_start" locale="en"
									inputClass="timezhong" value="#{JobdispatchlistAdd.subjobplanEndDate}" datePattern="yyyy-MM-dd" 
									cellWidth="10px" cellHeight="20px" style="margin-left:20px;"/>
									<h:message for="subjobplanEndDate" style="color:red"  />			
						    </div>
						    <div class="menuright" style="margin-top: 20px;">
								 <h:outputText value="细节说明"  style="font-size:22px;color:white;"/>
							</div>
							<h:inputTextarea id="jobdispatchlistDec" value="#{JobdispatchlistAdd.jobdispatchlistDec}" style="width:730px;height:110px;
								margin-top:20px;font-size:26px;color: #595959;">
							</h:inputTextarea>
						</rich:panel>
	 				</td>
	 			</tr>
	 		</table>
	 	</div>
	 
	 </div>
	

<script type="text/javascript" src="../js/ext-base.js"></script>
<script type="text/javascript" src="../js/ext-all.js"></script>			
<script type="text/javascript">
//<![CDATA[ 
function datatest(){
  var jobdispatchlistNum = Ext.getDom("myform:jobdispatchlistNum").value;
  var jobNum = Ext.getDom("myform:jobNum").value;
  if(jobdispatchlistNum > jobNum ){
   alert("工单数量应小于等于作业的计划数量!");
   Ext.get("myform:jobdispatchlistNum").focus(true);
  }
}							 
	document.getElementById("myform:jobdispatchlistStartDatePopupButton").style.display="none";
	document.getElementById("myform:jobdispatchlistEndDatePopupButton").style.display="none";
	document.getElementById("myform:subjobplanStartDatePopupButton").style.display="none";
	document.getElementById("myform:subjobplanEndDatePopupButton").style.display="none";
//]]> 
</script>
			
		</h:form>
	</h:body>
	
</ui:composition>
