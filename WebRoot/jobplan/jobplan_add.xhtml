<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui">

	<h:head>
	<link rel="stylesheet" href="/mocs/css/jobplan_add.css" type="text/css"></link>
	
	</h:head>		

	<h:body>
		<h:form id="myform">
<div id="maskw" style=" position:absolute; z-index:1000000; top:0px; left:0px; background-color:white; "></div>
<script type="text/javascript">
var wjb51 = 0;
var hjb51 = 0;
hjb51 = document.body.clientHeight;
wjb51 = document.body.clientWidth;
if(hjb51>wjb51){ //高大于宽 ，高等比缩小 
		hjb51 = wjb51*1080/1920; 
	}
if(600>hjb51){  //高小于600，赋值为600，设滚动条为滚动 
	   hjb51 = 600; 
	   wjb51 = 800;
	   document.body.style.overflow="scroll";
   }
if(800>wjb51){
	   hjb51 = 600;
	   wjb51 = 800;
	   document.body.style.overflow="scroll";
}
	document.getElementById("maskw").style.height = hjb51 + "px";
	document.getElementById("maskw").style.width = wjb51 + "px";
</script>
<div style="width: 100%;" align="center">
<table id="addcontains" >
	<tr>
		<td id="addcenter" style="text-align: center;" align="center">
			<h:inputHidden value="#{JobPlanAdd.isSuccess}" id="isSuccess"></h:inputHidden>
			<h:inputHidden id="pdpd" value="#{JobPlanAdd.dialog}" />
			<h:inputHidden id="valueToNul" value="#{JobPlanAdd.valueToNul}" />
			<table id="addcentertb" border="0" cellspacing="0" cellpadding="0">
				<tr>
					<td id="addcentertd1" align="center">
						<h:outputText value="计划创建"   />
					</td>
				</tr>
				<tr>
					<td id="addcentertd2" >
						<table id="addcentertd2tb" width="100%" height="100%" border="0" cellspacing="0" cellpadding="0">
							<tr>
								<td id="addcentertd2tbtd20" >
									<h:outputText id="titletext1" value="零件名称" />
								</td>
								<td id="addcentertd2tbtd24" >
									<h:outputText id="titletext24" value="计划类型" />
								</td>
								<td>
									<h:outputText id="titletext25" value="父作业计划" />
								</td>
							</tr>
							<tr>
								<td id="addcentertd2tbtd21" >
									<div id="addcentertd2tbtd5div" >
									     <h:selectOneMenu id="partTypeId" 
											value="#{JobPlanAdd.partTypeId}" required="true" 
											requiredMessage="不能为空" style="color:#595959;">
											<f:selectItem itemLabel="请选择" itemValue=""></f:selectItem>
											<f:selectItems value="#{JobPlanAdd.partMap}" var="tt" itemLabel="#{tt.bname}" itemValue="#{tt.bid}"></f:selectItems>
											<f:ajax event="change" listener="#{JobPlanAdd.getPTJobPlanInfo}" execute="@this" render=":myform:pidpanegrid"/>
										</h:selectOneMenu><br/>
										<h:message for="partTypeId" style="color:red" />
									</div>
								</td>
								<td>
									<h:selectOneMenu style="color:#595959;" id="jobplanType" value="#{JobPlanAdd.planType}" required="true"
										requiredMessage="不能为空">
										<f:selectItem itemLabel="请选择" itemValue=""></f:selectItem>
										<f:selectItem itemLabel="作业计划" itemValue="1"></f:selectItem>
										<f:selectItem itemLabel="批次计划" itemValue="2"></f:selectItem>
										<f:ajax event="change" listener="#{JobPlanAdd.getPTJobPlanInfo}"
											render=":myform:pidpanegrid :myform:addbools" execute="@this" />
									</h:selectOneMenu><br/>
									<h:message for="jobplanType" style="color:red"></h:message>
								</td>
								<td>
									<h:panelGrid id="pidpanegrid">
										<h:selectOneMenu style="color:#595959;" id="pjobplan" value="#{JobPlanAdd.pJobPlanId}">
											<f:selectItem itemLabel="请选择" itemValue=""></f:selectItem>
											<f:selectItems value="#{JobPlanAdd.pJobPlan}" var="pjob" itemLabel="#{pjob.name}"
												itemValue="#{pjob.id}">
											</f:selectItems>
										</h:selectOneMenu>
										<script type="text/javascript">
											document.getElementById("myform:pjobplan").style.width = wjb51*228/1500+"px";  //是270和36大小 
											document.getElementById("myform:pjobplan").style.height = hjb51*37/900+"px";
											document.getElementById("myform:pjobplan").style.marginLeft = "0px"; //离左边为左边图片的宽度 
											document.getElementById("myform:pjobplan").style.fontSize = hjb51*20/900+"px";
										</script>
									</h:panelGrid>
								</td>
							</tr>
							<tr id="addcentertd2tbtr1" >
								<td>
									<h:outputText id="titletext2" value="计划编号" /> 
									<h:graphicImage id="img1" value="../images/jobplan/add/toBig.png" style="cursor:pointer;" > 
									<f:ajax event="click" listener="#{JobPlanAdd.getShowInfo}"
											render=":myform:show" execute="no" />
									</h:graphicImage>
								</td>
								<td>
									<h:outputText id="titletext3" value="计划名称" />
								</td>
								<td id="addcentertd2tbtd4" >
									<h:outputText id="titletext6" value="计划状态" />
								</td>
							</tr>
							<tr>
								<td>	
									<div id="addcentertd2tbtd6div" >
										<h:inputText id="no" value="#{JobPlanAdd.no}" ></h:inputText>
									</div>
									<h:panelGrid id="kkkk" style="display:none;">
										<script type="text/javascript">
										document.getElementById("myform:no").style.width=wjb51*228/1500+"px";	
										document.getElementById("myform:no").style.height=hjb51*37/900+"px";
										document.getElementById("myform:no").style.fontSize=hjb51*20/900+"px";
										</script>
									</h:panelGrid>
									<h:outputText id="show" style="color:red;" value="#{JobPlanAdd.show}" />
								</td>
								<td>
									<div id="addcentertd2tbtd7div" >
										<h:inputText id="name" value="#{JobPlanAdd.name}"
											class="input_style" required="true" requiredMessage="不能为空" /><br/>
										<h:message for="name" style="color:red" />
									</div>
								</td>
								<td id="addcentertd2tbtd5" >
									<h:inputText id="status" value="#{JobPlanAdd.status}"
										class="input_style"  readonly="true" style="color:#595959"/>
								</td>
							</tr>
							<tr>
								
								<td>
									<h:outputText id="titletext7" value="优先级" />
								</td>
								<td>
									<h:outputText id="titletext8" value="计划开始时间" />
								</td>
								<td id="addcentertd2tbtd10" >
									<h:outputText id="titletext9" value="计划结束时间" />
									
								</td>
							</tr>
							<tr>
								
								<td>
									<h:selectOneMenu id="priority" 
										required="true" requiredMessage="不能为空"
										value="#{JobPlanAdd.priority}" style="color:#595959;">
										<f:selectItem itemLabel="请选择" itemValue=""></f:selectItem>
										<f:selectItem itemLabel="1" itemValue="1"></f:selectItem>
										<f:selectItem itemLabel="2" itemValue="2"></f:selectItem>
									</h:selectOneMenu> <br/><h:message for="priority" style="color:red" />	
								</td>
								<td>
									<rich:calendar id="startTime" popup="true"
										locale="en"
										value="#{JobPlanAdd.planStarttime}" datePattern="yyyy-MM-dd"
										cellWidth="10px" cellHeight="20px" required="true"
										requiredMessage="不能为空" /> 
										<br/>
										<h:message for="startTime" style="color:red" />
								</td>
								<td id="addcentertd2tbtd11" >
									<rich:calendar id="endTime" popup="true"
										required="true" requiredMessage="不能为空"
										locale="en"
										value="#{JobPlanAdd.planEndtime}" datePattern="yyyy-MM-dd"
										cellWidth="10px" cellHeight="20px" /> <br/><h:message
										for="endTime" style="color:red" />
								</td>
							</tr>
							<tr>
								<td>
									<h:outputText id="titletext20" value="交货时间" />
								</td>
								<td>
									<h:outputText id="titletext4" value="计划数量" />
								</td>
								<td id="addcentertd2tbtd14" >
									<h:outputText id="titletext5" value="待分配任务数量" />
								</td>
							</tr>
							<tr>
								<td>
									<rich:calendar id="submitTime" popup="true"
										locale="en"						
										value="#{JobPlanAdd.submitTime}" datePattern="yyyy-MM-dd"
										cellWidth="10px" cellHeight="20px" 
									/><br/>
									<h:message for="submitTime" style="color:red" />
								</td>
								<td>
									<h:inputText id="planNum" value="#{JobPlanAdd.planNum}" class="input_style" required="true" 
										requiredMessage="不能为空" >
										<f:ajax event="change" listener="#{JobPlanAdd.getProPlanNoValue}"
											render=":myform:proPlanNos" execute="planNum" />
									</h:inputText> 
											<br/>
									<h:message for="planNum" style="color:red" />
								</td>
								<td id="addcentertd2tbtd15" >
									<h:panelGrid id="proPlanNos">
									<h:inputText id="proPlanNo" readonly="true"
										value="#{JobPlanAdd.allocatedNum}" class="input_style" style="color:#595959"/> 
									<script type="text/javascript">
										document.getElementById("myform:proPlanNo").style.width=wjb51*228/1500+"px";	
										document.getElementById("myform:proPlanNo").style.height=hjb51*37/900+"px";
										document.getElementById("myform:proPlanNo").style.fontSize=hjb51*20/900+"px";
									</script>
									</h:panelGrid>
								</td>
							</tr>
						</table>
					</td>
				</tr>
				<tr>
					<td id="addtablecontent" style="width: 100%;">
						<div style="width: 95%;height:100%;border:0px solid red;">
							<h:panelGrid id="addbools">
								<c:if test="${JobPlanAdd.addbool}">
									<h:graphicImage url="../images/plus_small.png" width="20px" height="20px" onclick="addTask.show()"  style="cursor: pointer;">
									</h:graphicImage>
								</c:if>
							</h:panelGrid>
							<div style="width: 100%;height: 100%;border:0px;overflow: auto;">
							 <p:dataTable id="taskData" var="task" value="#{JobPlanAdd.addTask}" editable="true" style="margin-bottom:20px"
							 	  rowKey="#{task.id}">
							 	
						       <p:ajax event="rowEdit" listener="#{JobPlanAdd.updateTaskData}" update=":myform:taskData :myform:proPlanNos :myform:messages" />
						       <p:ajax event="rowEditCancel" listener="#{JobPlanAdd.onRowCancel}" update=":myform:taskData :myform:proPlanNos" />
						       <p:column headerText="ERP任务号">
						           <p:cellEditor>
						               <f:facet name="output"><h:outputText value="#{task.addTaskNo}" /></f:facet>
						               <f:facet name="input"><p:inputText value="#{task.addTaskNo}" style="width:100%" label="Year"/></f:facet>
						           </p:cellEditor>
						       </p:column>
						       <p:column headerText="任务分配数量">
						           <p:cellEditor>
						               <f:facet name="output"><h:outputText value="#{task.addTaskNum}" /></f:facet>
						               <f:facet name="input">
						               		<p:inputText value="#{task.addTaskNum}" style="width:100%" label="Year"/>
						               </f:facet>
						           </p:cellEditor>
						       </p:column>
						        <p:column headerText="已上报数量">
						           <p:cellEditor>
						               <f:facet name="output"><h:outputText value="#{task.reportNum}" /></f:facet>
						               <f:facet name="input">
						               		<h:outputText value="#{task.reportNum}" />
						               </f:facet>
						           </p:cellEditor>
						       </p:column>
						       <p:column  headerText="操作">
						           <p:rowEditor />
						            <p:commandLink actionListener="#{JobPlanAdd.delTaskData(task)}" update=":myform:taskData :myform:proPlanNos" 
						            styleClass="ui-icon ui-icon-closethick" style="margin-left:20px;"></p:commandLink>
						            
						       </p:column>
						   </p:dataTable>
						   </div>
						   <p:dialog widgetVar="addTask" id="addTask">
						   		<table>
						   			<tr>
						   				<td>
						   					<h:outputText value="ERP任务号"></h:outputText>
						   				</td>
						   				<td>
						   					<h:panelGrid id="addTaskNos">
						   					<h:inputText value="#{JobPlanAdd.addTaskNo}" id="addTaskNo">
						   					</h:inputText>
						   					<script type="text/javascript">
												document.getElementById("myform:addTaskNo").style.width=wjb51*228/1500+"px";	
												document.getElementById("myform:addTaskNo").style.height=hjb51*37/900+"px";
												document.getElementById("myform:addTaskNo").style.fontSize=hjb51*20/900+"px";
											</script>
											</h:panelGrid>
						   				</td>
						   			</tr>
						   			<tr>
						   				<td>
						   					<h:outputText value="任务分配数量"></h:outputText>
						   				</td>
						   				<td>
						   					<h:panelGrid id="addTaskNums">
						   					<h:inputText value="#{JobPlanAdd.addTaskNum}" 
						   						onkeyup="this.value=this.value.replace(/\D/g,'')" 
						   						onafterpaste="this.value=this.value.replace(/\D/g,'')" id="addTaskNum"></h:inputText>
						   						<script type="text/javascript">
													document.getElementById("myform:addTaskNum").style.width=wjb51*228/1500+"px";	
													document.getElementById("myform:addTaskNum").style.height=hjb51*37/900+"px";
													document.getElementById("myform:addTaskNum").style.fontSize=hjb51*20/900+"px";
												</script>
						   					</h:panelGrid>
						   				</td>
						   			</tr>
						   			<tr>
						   				<td colspan="2" align="center">
						   					<p:commandButton actionListener="#{JobPlanAdd.addTaskData}" value="添加"  
						   						update=":myform:addTask :myform:taskData :myform:proPlanNos :myform:messages " 
						   						oncomplete="addTask.hide()" style="background-image: url('');background-color: #088B00;
						   						cursor: pointer;color:#FFFFFF;border:0px;text-shadow:none;"/>
						   				</td>
						   			</tr>
						   		</table>
						   </p:dialog>
						</div>
					</td>
				</tr>
				<tr>
					<td id="addcentertd3td5"   align="center">
						
					<p:commandButton id="addcentertd3td5com"  value="保存"  
						style="float:left;border:0;background-color: #00A040;background-image: url('');color:white;text-shadow:none;" 
						onclick="onYZ()"/>
						
					<p:commandButton id="addcentertd3td5comhiddle" oncomplete="yzisclose()"
						value="" actionListener="#{JobPlanAdd.addJobAction}" style="float:left;border:0;background-color: white;
						display:none;background-image: url('../images/jobplan/add/open.png');" update=":myform"/>
												
					<div id="addcentertd3td5div" style="float:left;"></div>
					<p:commandButton  value="取消"  id="addcentertd3td5com2"
						style="float:left;border:0;background-color: #00A040;background-image: url('');color:white;text-shadow:none;" 
						onclick="window.close();"/>						
					</td>

				</tr>
			</table>
		</td>
	</tr>
</table>	
<p:growl id="messages" showDetail="true"/> 
</div>
<script type="text/javascript">

var imgPercent = hjb51/900; //比例 	

//宽高 
document.getElementById("addcontains").style.width=+"px";
document.getElementById("addcontains").style.height=hjb51*800/900+"px";
document.getElementById("addcenter").style.width=+"px";
document.getElementById("addcenter").style.height=hjb51*800/900+"px";

document.getElementById("addcenter").style.marginLeft=wjb51*200/1500+"px";
//中间 
document.getElementById("addcentertb").style.width=wjb51*850/1500+"px";	
document.getElementById("addcentertb").style.height=hjb51*664/900+"px";
document.getElementById("addcentertb").style.marginLeft=wjb51*135/1500+"px";

document.getElementById("addcentertd1").style.height=hjb51*130/900+"px";
document.getElementById("addcentertd1").style.fontSize=hjb51*40/900+"px";	

document.getElementById("addcentertd2").style.width=wjb51*756/1500+"px";
document.getElementById("addcentertd2tbtr1").style.height=hjb51*37/900+"px";
document.getElementById("addcentertd2tbtd4").style.height=hjb51*37/900+"px";
document.getElementById("addcentertd2tbtd5").style.height=hjb51*37/900+"px";
document.getElementById("addcentertd2tbtd5div").style.width=wjb51*250/1500+"px";
document.getElementById("addcentertd2tbtd6div").style.width=wjb51*250/1500+"px";
document.getElementById("addcentertd2tbtd7div").style.width=wjb51*250/1500+"px";
document.getElementById("myform:show").style.marginLeft=wjb51*70/1500+"px";
document.getElementById("addcentertd2tbtd10").style.height=hjb51*37/900+"px";
document.getElementById("addcentertd2tbtd11").style.height=hjb51*37/900+"px";
document.getElementById("addcentertd2tbtd14").style.height=hjb51*37/900+"px";
document.getElementById("addcentertd2tbtd15").style.height=hjb51*37/900+"px";

document.getElementById("addcentertd3td5").style.height=hjb51*90/900+"px";
document.getElementById("myform:addcentertd3td5com").style.marginLeft=wjb51*260/1500+"px";
document.getElementById("myform:addcentertd3td5com").style.width=wjb51*110/1500+"px";
document.getElementById("myform:addcentertd3td5com").style.height=hjb51*50/900+"px";
document.getElementById("addcentertd3td5div").style.width=wjb51*110/1500+"px";
document.getElementById("addcentertd3td5div").style.height=hjb51*50/900+"px";
document.getElementById("myform:addcentertd3td5com2").style.width=wjb51*110/1500+"px";
document.getElementById("myform:addcentertd3td5com2").style.height=hjb51*50/900+"px";

//下拉列表 
document.getElementById("myform:partTypeId").style.width = wjb51*228/1500+"px";  //是270和36大小 
document.getElementById("myform:partTypeId").style.height = hjb51*37/900+"px";
document.getElementById("myform:partTypeId").style.marginLeft = "0px"; //离左边为左边图片的宽度 
document.getElementById("myform:partTypeId").style.fontSize = hjb51*20/900+"px";

document.getElementById("myform:jobplanType").style.width = wjb51*228/1500+"px";  //是270和36大小 
document.getElementById("myform:jobplanType").style.height = hjb51*37/900+"px";
document.getElementById("myform:jobplanType").style.marginLeft = "0px"; //离左边为左边图片的宽度 
document.getElementById("myform:jobplanType").style.fontSize = hjb51*20/900+"px";

document.getElementById("myform:pjobplan").style.width = wjb51*228/1500+"px";  //是270和36大小 
document.getElementById("myform:pjobplan").style.height = hjb51*37/900+"px";
document.getElementById("myform:pjobplan").style.marginLeft = "0px"; //离左边为左边图片的宽度 
document.getElementById("myform:pjobplan").style.fontSize = hjb51*20/900+"px";


document.getElementById("myform:status").style.width = wjb51*228/1500+"px";  //是270和36大小 
document.getElementById("myform:status").style.height = hjb51*37/900+"px";
document.getElementById("myform:status").style.marginLeft = "0px"; //离左边为左边图片的宽度 
document.getElementById("myform:status").style.fontSize = hjb51*20/900+"px";

document.getElementById("myform:priority").style.width = wjb51*228/1500+"px";  //是270和36大小 
document.getElementById("myform:priority").style.height = hjb51*37/900+"px";
document.getElementById("myform:priority").style.marginLeft = "0px"; //离左边为左边图片的宽度 
document.getElementById("myform:priority").style.fontSize = hjb51*20/900+"px";

document.getElementById("myform:startTimeInputDate").style.width=wjb51*228/1500+"px";	
document.getElementById("myform:startTimeInputDate").style.height=hjb51*37/900+"px";
document.getElementById("myform:startTimeInputDate").style.fontSize=hjb51*20/900+"px";	
document.getElementById("myform:endTimeInputDate").style.width=wjb51*228/1500+"px";	
document.getElementById("myform:endTimeInputDate").style.height=hjb51*37/900+"px";
document.getElementById("myform:endTimeInputDate").style.fontSize=hjb51*20/900+"px";	

//输入框 
document.getElementById("myform:no").style.width=wjb51*228/1500+"px";	
document.getElementById("myform:no").style.height=hjb51*37/900+"px";
document.getElementById("myform:no").style.fontSize=hjb51*20/900+"px";
document.getElementById("myform:name").style.width=wjb51*228/1500+"px";	
document.getElementById("myform:name").style.height=hjb51*37/900+"px";
document.getElementById("myform:name").style.fontSize=hjb51*20/900+"px";
document.getElementById("myform:planNum").style.width=wjb51*228/1500+"px";	
document.getElementById("myform:planNum").style.height=hjb51*37/900+"px";
document.getElementById("myform:planNum").style.fontSize=hjb51*20/900+"px";

document.getElementById("myform:proPlanNo").style.width=wjb51*228/1500+"px";	
document.getElementById("myform:proPlanNo").style.height=hjb51*37/900+"px";
document.getElementById("myform:proPlanNo").style.fontSize=hjb51*20/900+"px";

document.getElementById("myform:startTime").style.width=wjb51*228/1500+"px";	
document.getElementById("myform:startTime").style.height=hjb51*37/900+"px";
document.getElementById("myform:startTime").style.fontSize=hjb51*20/900+"px";
document.getElementById("myform:endTime").style.width=wjb51*228/1500+"px";	
document.getElementById("myform:endTime").style.height=hjb51*37/900+"px";
document.getElementById("myform:endTime").style.fontSize=hjb51*20/900+"px";
document.getElementById("myform:img1").style.marginLeft=wjb51*60/1500+"px";

document.getElementById("myform:titletext1").style.fontSize=hjb51*20/900+"px";
document.getElementById("myform:titletext2").style.fontSize=hjb51*20/900+"px";
document.getElementById("myform:titletext3").style.fontSize=hjb51*20/900+"px";
document.getElementById("myform:titletext4").style.fontSize=hjb51*20/900+"px";
document.getElementById("myform:titletext5").style.fontSize=hjb51*20/900+"px";
document.getElementById("myform:titletext6").style.fontSize=hjb51*20/900+"px";
document.getElementById("myform:titletext7").style.fontSize=hjb51*20/900+"px";
document.getElementById("myform:titletext8").style.fontSize=hjb51*20/900+"px";
document.getElementById("myform:titletext9").style.fontSize=hjb51*20/900+"px";

//图片和背景图片大小 
	var new_image = new Image();
	new_image.src = document.getElementById("myform:img1").src;
	var wjbimg= new_image.width;
	var hjbimg= new_image.height;
	
	document.getElementById("myform:img1").style.width=wjbimg*imgPercent+"px";
	document.getElementById("myform:img1").style.height=hjbimg*imgPercent+"px";


document.getElementById("myform:titletext20").style.fontSize=hjb51*20/900+"px";	
document.getElementById("myform:titletext24").style.fontSize=hjb51*20/900+"px";	
document.getElementById("myform:titletext25").style.fontSize=hjb51*20/900+"px";	
document.getElementById("addcentertd2tbtd20").style.height=hjb51*37/900+"px";
document.getElementById("addcentertd2tbtd21").style.height=hjb51*37/900+"px";
//document.getElementById("addcentertd2tbtd22").style.height=hjb51*37/900+"px";

document.getElementById("addtablecontent").style.height=hjb51*300/900+"px";

//document.getElementById("addcentertd2tbtd23").style.height=hjb51*37/900+"px";
document.getElementById("myform:submitTimeInputDate").style.width=wjb51*228/1500+"px";	
document.getElementById("myform:submitTimeInputDate").style.height=hjb51*37/900+"px";
document.getElementById("myform:submitTimeInputDate").style.fontSize=hjb51*20/900+"px";


</script>	
			
<script type="text/javascript" src="../js/ext-base.js"></script>
<script type="text/javascript" src="../js/ext-all.js"></script>			
<script type="text/javascript">
//<![CDATA[ 
  var dialog = Ext.getDom("myform:pdpd").value;
  if(dialog=="show"){
   alert("作业计划已存在,请不要重复添加!");
  }
  
  document.getElementById("myform:startTimePopupButton").style.display="none";
  document.getElementById("myform:endTimePopupButton").style.display="none";
  document.getElementById("myform:submitTimePopupButton").style.display="none";
  
  function yzisclose(){//验证是否添加成功 是否关闭
	  var isSuccess=document.getElementById("myform:isSuccess").value;
  	if(null!=isSuccess&&isSuccess=="添加成功"){
  		//alert(isSuccess);
  		window.opener.location.href=window.opener.location.href;window.close();
  	}
  }
  function onYZ(){
	  var startTime=document.getElementById("myform:startTimeInputDate").value;
	  var endTime=document.getElementById("myform:endTimeInputDate").value;
	  var tt=dateCompare(startTime,endTime);
	  var jobplanType=document.getElementById("myform:jobplanType").value;
	  if(null==startTime||""==startTime){
		  alert("请选择计划开始时间！");
	  }else if(null==endTime||""==endTime){
		  alert("请选择计划结束时间！");
	  }else if(!tt){
		alert("开始时间不能大于结束时间!");  
	  }else if(null==jobplanType||""==jobplanType){
		  alert("请选择计划类型!");
	  }else if(jobplanType=="2"){
		  var pjobplan=document.getElementById("myform:pjobplan").value;
		  if(null==pjobplan||""==pjobplan){
			  alert("请选择父作业计划");
		  }else{
			  document.getElementById("myform:addcentertd3td5comhiddle").click();
		  }
	  }else{
		  document.getElementById("myform:addcentertd3td5comhiddle").click();
	  }
  }
  function dateCompare(startdate,enddate)   
  {   
  var arr=startdate.split("-");    
  var starttime=new Date(arr[0],arr[1],arr[2]);    
  var starttimes=starttime.getTime();   
    
  var arrs=enddate.split("-");    
  var lktime=new Date(arrs[0],arrs[1],arrs[2]);    
  var lktimes=lktime.getTime();   
    
  if(starttimes>lktimes)    
  {   
  return false;   
  }   
  else  
  return true;   
    
  }  
 
      
//]]> 
</script>
    	 <script type="text/javascript">
				setTimeout(function(){
				//document.getElementById("maskw").style.display="none";
				$("#maskw").fadeOut(500);
				},100);
     	</script>
			
		</h:form>
	</h:body>
	
</ui:composition>
