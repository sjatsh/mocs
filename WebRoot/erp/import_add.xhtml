<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui">

	<h:head>
	<style type="text/css">
	textarea, input[type="text"], input[type="password"], select{
    	font-size: 16px;
	}
	.rf-cal-inp{
		width: 180px;
		height: 27px;
	}
	</style>
	</h:head>		

	<h:body>
		<h:form id="myform">
<div id="maskw" style=" position:absolute; z-index:1000000; top:0px; left:0px; background-color:white; "></div>
<script type="text/javascript">
	var wjb51 = 0;
	var hjb51 = 0;
	hjb51 = document.body.clientHeight;
	wjb51 = document.body.clientWidth;
	if(hjb51>wjb51){ //高大于宽 ，高等比缩小 
			hjb51 = wjb51*1080/1920; 
		}
	if(600>hjb51){  //高小于600，赋值为600，设滚动条为滚动 
		   hjb51 = 600; 
		   wjb51 = 800;
		   document.body.style.overflow="scroll";
	   }
	if(800>wjb51){
		   hjb51 = 600;
		   wjb51 = 800;
		   document.body.style.overflow="scroll";
	}
	document.getElementById("maskw").style.height = hjb51 + "px";
	document.getElementById("maskw").style.width = wjb51 + "px";
</script>
<div style="width: 100%; height: 10%; margin-top: 35px;">
<table id="addcontains" >
	<tr>
		<td>
			<h:outputText value="查询时间:" style="margin-left: 20px;"/>
		</td>
		<td>
			<rich:calendar id="startTime" popup="true" locale="en" cellWidth="10px" cellHeight="20px" 
				value="#{importAddBean.startTime}" datePattern="yyyy-MM-dd"
				style="margin-left: 25px;margin-right: 25px;"/>
		</td>
		<td>
			<h:outputText value="~" />
		</td>
		<td>
			<rich:calendar id="endTime" popup="true" locale="en" cellWidth="10px" cellHeight="20px"
				value="#{importAddBean.endTime}" datePattern="yyyy-MM-dd"
				style="margin-left: 25px;margin-right: 25px;"/>
		</td>
		<td>
			<h:outputText value="处理标志:" />
		</td>
		<td>
			<h:selectOneMenu id="flag" value="#{importAddBean.flag}" style="margin-left: 25px;margin-right: 25px;height: 27px;width: 100px;">
				<f:selectItems value="#{importAddBean.flagMap}"></f:selectItems>
			</h:selectOneMenu>
		</td>
		<td id="ctxButton" align="center" style="width:10%">
			<div id="button1" style="cursor: pointer;"  onclick="cxbtn();" align="center">
				 <img src="../images/machin_cost_seach_blue.png"  style="width: 25px;height: 25px;"/>
			</div>
			<h:commandButton action="#{importAddBean.SubmitSearch}" id="submt" style="display:none;">
				<a4j:ajax listener="#{importAddBean.SubmitSearch}" event="click" execute="startTime endTime flag" render=":myform:batchList"></a4j:ajax>
			</h:commandButton>
		</td>
	</tr>
</table>	
</div>
<h:inputHidden value="#{importAddBean.isSuccess}" id="isSuccess"></h:inputHidden>
<div style="height:80%;overflow-y: scroll;">
	<p:dataTable id="batchList"  styleClass="table" style="width: auto; left: 170px; right: 0;"
		value="#{importAddBean.mediumModel}" var="out" selection="#{importAddBean.selectedInfo}" rowKey="#{out.jobno}">
    	   <p:column selectionMode="multiple" style="width:2%;text-align:center"/>
    	  <p:column headerText="任务号"  style="width:7%;word-break: break-all;">
    	  	<h:outputText value="#{out.jobno}"></h:outputText>
    	  </p:column>
    	  <p:column headerText="投料数量" style="width:5%;word-break: break-all;">
    	  	<h:outputText value="#{out.quantity}"></h:outputText>
    	  </p:column>
    	  <p:column headerText="零件名称" style="width:15%;word-break: break-all;">
    	  	<h:outputText value="#{out.partName}"></h:outputText>
    	  </p:column>
    	  <p:column headerText="零件编号" style="width:14%;word-break: break-all;">
    	  	<h:outputText value="#{out.partNo}"></h:outputText>
    	  </p:column>
    	  <p:column headerText="开始时间" style="width:13%;word-break: break-all;">
    	  	<h:outputText value="#{out.startTime}"></h:outputText>
    	  </p:column>
    	  <p:column headerText="结束时间" style="width:13%;word-break: break-all;">
    	  	<h:outputText value="#{out.endTime}"></h:outputText>
    	  </p:column>
    	  <p:column headerText="发放时间" style="width:13%;word-break: break-all;">
    	  <h:outputText value="#{out.releaseDate}"></h:outputText>
    	  </p:column>
    	  <p:column headerText="处理标志" style="width:5%;word-break: break-all;">
    	  	<h:outputText value="#{out.flag}"></h:outputText>
    	  </p:column>
    	  <p:column headerText="上传时间" style="width:13%;word-break: break-all;">
    	  	<h:outputText value="#{out.uploadDate}"></h:outputText>
    	  </p:column>
   	</p:dataTable>
</div>
<div style="height:10%">
	<table align="center">
		<tr>
			<td>
			<h:commandButton id="button1" title="导入" value="导入" 
				style="font-size:14px;border-radius: 3px;float:left;border:0;background-color: #00A040;background-image: url('');color:white;text-shadow:none;" >
				<a4j:ajax listener="#{importAddBean.importData}" execute="batchList" render=":myform:batchList :myform:isSuccess" event="click" oncomplete="tishixinxi()"></a4j:ajax>
			</h:commandButton>
			</td>
			<td>
			<h:commandButton id="button2" title="关闭" value="关闭" onclick="window.close();" 
				style="font-size:14px;border-radius: 3px;float:left;border:0;background-color: #00A040;background-image: url('');color:white;text-shadow:none;" >
			</h:commandButton>
			</td>
		</tr>
	</table>
</div>
<script type="text/javascript">
//开始时间和结束时间
document.getElementById("myform:startTimePopupButton").style.display="none";
document.getElementById("myform:endTimePopupButton").style.display="none";

//导入按钮和关闭按钮
document.getElementById("myform:button1").style.width=wjb51*110/1500+"px";
document.getElementById("myform:button1").style.height=hjb51*50/900+"px";
document.getElementById("myform:button2").style.width=wjb51*110/1500+"px";
document.getElementById("myform:button2").style.height=hjb51*50/900+"px";
</script>
<script type="text/javascript">
//<![CDATA[ 
function cxbtn(){
	document.getElementById("myform:submt").click();
}
function tishixinxi(){
	var isSuccess=document.getElementById("myform:isSuccess").value;
	alert(isSuccess);
}    
//]]> 
</script>
    	 <script type="text/javascript">
				setTimeout(function(){
				$("#maskw").fadeOut(500);
				},100);
     	</script>
			
		</h:form>
	</h:body>
	
</ui:composition>
