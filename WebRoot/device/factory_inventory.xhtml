<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core">
	<h:outputScript library="js" name="factory_profile.js"></h:outputScript>
	<h:outputScript library="js" name="common.js"></h:outputScript>
	<link rel="stylesheet" href="./css/factory_profile.css" type="text/css"></link>
	<style>
	.homemenu{
		position:absolute;background-color:gray;z-index:200000;display:block !important;
	}
	.tohome{
		position:absolute;z-index:200000;
	}
	.even-row {
		background-image: url('./img/common_info_img/common_table_col_bg.png') !important;
		background-position: 0px 24px;
		border-bottom: none;
	}
	
	.odd-row {
		background-image: url('./img/common_info_img/common_table_col_bg.png') !important;
		border-bottom: none;
		
	}
	.rf-dt-shdr-c{
		background-image:none ;
		background-color:#00B050 ;
		color:white;
		font-size: 50%;
	}
	.rf-dt-c{
		color:#5A5A5A;
		font-size: 40%;
	}
	.yx{
		color: #37A338;
	}
	.tj{
		color: #626262;
	}
	.zb{
		color: #FED400;
	}
	.gz{
		color: #FF0000;
	}
	.kx{
		color:#FED400;
	}
	</style>
	<h:form id="myform">
		<div id="maskw" style=" position:absolute; z-index:1000000; top:0px; left:0px; background-color:white; "></div>
		<script type="text/javascript">	
			document.getElementById("maskw").style.height = hjb51 + "px";
			document.getElementById("maskw").style.width = wjb51 + "px";
		</script>	
		<table id="factoptt" style="width: 100%;height: 100%;font-size: 28px;">
			<tr>
				<td width="100%"  height="30%">
					<table id="profile_top" style="width: 100%">
						<tr>
							<td style="width: 20%" align="center">
								<div style="cursor: pointer; position: absolute;"
									onclick="javascript:window.location.href='home.faces'"></div> 								
							</td>
							<td style="width: 20%">
								<table height="100%" width="100%">
									<tr>
										<td align="left">
											<img src="./images/profile_top_split.png" id="img2" class="profile_top_right_split" />
										</td>
										<td align="center" valign="center">
											<table height="100%" width="100%">
												<tr>
													<td valign="top">
														<div id="textname1" style="font-weight: bold; color: #00b050;">工单准时率</div>
													</td>
												</tr>
												<tr>
													<td style="font-weight: bold; color: #fed400;" id="ppf" align="center">95</td>
												</tr>
												<tr>
													<td valign="bottom"
														style="font-weight: bold; color: #fed400;"
														id="textpercent1" align="right">%</td>
												</tr>
											</table>
										</td>
									</tr>
								</table>
							</td>
							<td style="width: 20%">
								<table style="width: 100%;height: 100%;">
									<tr>
										<td align="left">
											<img src="./images/profile_top_split.png" id="img3" class="profile_top_right_split" />
										</td>
										<td align="center" valign="center">
											<table height="100%" width="100%">
												<tr>
													<td valign="top" id="textname2"
														style=" font-weight: bold; color: #00b050;">
														<div id="textname2title">当日车间加工数量</div>
													</td>
													
												</tr>
												<tr>
													<td style="font-weight: bold; color: #00b050;" id="pit" align="center">209</td>
													
												</tr>
												<tr>
													<td valign="bottom"
														style="font-weight: bold; color: #267422;"
														id="textpercent2" align="right"><font style="color: white;">&#160;</font>
													</td>
												</tr>
											</table>
										</td>
									</tr>
								</table>
							</td>
							<td style="width: 20%">
								<table height="100%" width="100%">
									<tr>
										<td align="left"><img
											src="./images/profile_top_split.png" id="img4"
											class="profile_top_right_split" /></td>
										<td align="center" valign="center">
											<table height="100%" width="100%">
												<tr>
													<td valign="top" id="textname3"
														style=" font-weight: bold; color: #00b050;">
														<div id="textname3title">产品成套率</div>
													</td>
													
												</tr>
												<tr>
													<td style="font-weight: bold; color: #ff0000;" id="rcr" align="center">0</td>
												</tr>
												<tr>
													<td valign="bottom"
														style="font-weight: bold; color: #fed400"
														id="textpercent3" align="right">%</td>
												</tr>
											</table>
										</td>
									</tr>
								</table>
							</td>
							<td style="width: 20%">
								<table height="100%" width="100%">
									<tr>
										<td align="left"><img
											src="./images/profile_top_split.png" id="img5"
											class="profile_top_right_split" /></td>
										<td align="center" valign="center">
											<table height="100%" width="100%">
												<tr>
													<td valign="top" id="textname4"
														style=" font-weight: bold; color: #00b050;">
														<div id="textname4title">综合效率</div>
													</td>
												</tr>
												<tr>
													<td style="font-weight: bold; color: #fed400;" id="ee" align="center">65</td>
												</tr>
												<tr>
													<td valign="bottom"
														style="font-weight: bold; color: #fed400;"
														id="textpercent4" align="right">%</td>
												</tr>
											</table>
										</td>
									</tr>
								</table>
							</td>
						</tr>
					</table> <h:panelGroup></h:panelGroup>
				</td>
			</tr>
			<tr >
				<td align="left" style="height: 70%;">
					<img id="centerbg"
					style="position: absolute; left: 0px; z-Index: -1; border: 0px solid blue;display:none;left:0px;"
					src="./images/WIS2_content_bg.png" />
					<div id="nexttab" style="position: absolute;z-index: 100;margin-top:7%;">
						<img id="img2" onclick="jumpto('/mocs/device/factory_profile.xhtml')" 
						style="cursor: pointer; width: 50px; height: 124px;" src="./images/brackTab.png" />
					</div>
					<table width="100%" height="70%" id="kuangkuang">
						<tr>
							<td width="0"  style="color: red;" id="dtzb"></td>
							<td width="100%" id="imgbg" style="color: red;" align="center">
								<div id="content" style="position: relative;width: 100%;height: 100%;overflow: hidden;">
									<div style="height: 100%;width:100%;overflow-y:auto;" id="liebiaodiv">
										<rich:dataTable id="stable" value="#{factoryProfileBean.equInventory}" 
											rowClasses="even-row, odd-row" cellpadding="0"
											styleClass="" cellspacing="0" style="width:100%;" border="0" var="equ">
											<rich:column style="width:10%">
												<f:facet name="header">
													<h:outputText value="机床名称" />
												</f:facet>
												<h:outputText value="#{equ.equName}" />
											</rich:column>
											<rich:column style="width:10%">
												<f:facet name="header">
													<h:outputText value="序列号" />
												</f:facet>
												<h:outputText value="#{equ.equSerialNo}" />
											</rich:column>
											<rich:column style="width:8%">
												<f:facet name="header">
													<h:outputText value="当前状态" />
												</f:facet>
												<h:outputText value="#{equ.status}" styleClass="#{equ.color}"/>
											</rich:column>
											<rich:column style="width:7%">
												<f:facet name="header">
													<h:outputText value="运行模式" />
												</f:facet>
												<h:outputText value="#{equ.equStatus}" />
											</rich:column>
											<rich:column style="width:10%">
												<f:facet name="header">
													<h:outputText value="当前工序" />
												</f:facet>
												<h:outputText value="#{equ.processName}" />
											</rich:column>
											<rich:column style="width:45%">
												<f:facet name="header">
													<h:outputText value="零件编号" />
												</f:facet>
												<h:outputText value="#{equ.partName}" />
											</rich:column>
											<rich:column style="width:10%">
												<f:facet name="header">
													<h:outputText value="操作者" />
												</f:facet>
												<h:outputText value="#{equ.operatorName}" />
											</rich:column>
										</rich:dataTable>
									</div>
									<script type="text/javascript">
									//<![CDATA[	
									      document.getElementById("liebiaodiv").style.width =wjb51+18+"px";
									      //alert(document.getElementById("liebiaodiv").style.width);
									 //]]>	
									</script>
								</div>
							</td>
						</tr>
					</table> 
					
					<ui:remove></ui:remove> 
					<a4j:poll action="#{factoryProfileBean.refreshDataTwo}" interval="5000" render="reload stable" oncomplete="reloadEqu()"></a4j:poll>
					<a4j:outputPanel id="reload">
						<h:inputHidden value="#{factoryProfileBean.ppcr}" id="ppcrValue" />
						<h:inputHidden value="#{factoryProfileBean.nodp}" id="nodpValue" />
						<h:inputHidden value="#{factoryProfileBean.equday}" id="equdayValue" />
						<h:inputHidden value="#{factoryProfileBean.rcr}" id="rcrValue" />
					</a4j:outputPanel> 
				</td>
			</tr>
		</table>
		<img style="border: 0px;position: absolute;left: 0px;top: 0px;" src="./images/profile_top_logo.png" id="img1" />
		<script type="text/javascript">
		//<![CDATA[	
			//特定的高度
			document.getElementById("factoptt").style.width = wjb51 + "px";
			document.getElementById("factoptt").style.height = hjb51*994/1080+"px"; //继承自父页面，不知道为什么要这样写  
			document.getElementById("content").style.height = hjb51* 703 / 1080 + "px";
			document.getElementById("content").style.width = wjb51 + "px";
			
			//图片大小 
			for ( var i = 2; 6 > i; i++) {
				var new_image = new Image();
				new_image.src = document
						.getElementById("img" + i).src;
				var wjbimg = new_image.width;
				var hjbimg = new_image.height;

				document.getElementById("img" + i).style.width = wjbimg
						* imgPercent + "px";
				document.getElementById("img" + i).style.height = hjbimg
						* imgPercent + "px";
			}
		imgReady('./images/profile_top_logo.png', function () { 
		  var imgwjb51=this.width;
	   	  var imghjb51=this.height;
		  document.getElementById("img1").style.width=imgwjb51*imgPercent-30+"px";
		  document.getElementById("img1").style.height=imghjb51*imgPercent-30+"px";										
		  document.getElementById("img1").style.top=hjb51*30/1080+"px";
		  document.getElementById("img1").style.left=wjb51*25/1920+"px";
		  if(wjb51==800)
		  {
			  document.getElementById("img1").style.width=imgwjb51*45/100+"px";
			  document.getElementById("img1").style.height=imghjb51*45/100+"px";  
		  }
          });
			//图片背景 
			document.getElementById("centerbg").style.width = wjb51+ "px";
			document.getElementById("centerbg").style.height = hjb51* 720 / 1080 + "px";
			
			//字体大小 
			for ( var i = 1; 5 > i; i++) {
				document.getElementById("textname"+ i).style.fontSize = wjb51* 14 / 1000 + "px";
				document.getElementById("textpercent"+ i).style.fontSize = wjb51* 18 / 1000 + "px";
			}
			document.getElementById("ppf").style.fontSize = wjb51* 40 / 1000 + "px";
			document.getElementById("pit").style.fontSize = wjb51* 40 / 1000 + "px";
			document.getElementById("rcr").style.fontSize = wjb51* 40 / 1000 + "px";
			document.getElementById("ee").style.fontSize = wjb51* 40 / 1000 + "px";
			//地址字体大小 

			//地址菜单 
			$(".tohome").css("width",wjb51 * 223 / 1920 + "px");
			$(".tohome").css("left",wjb51 * 1680 / 1920 + "px");
			$(".tohome").css("top",hjb51 * 902 / 1080 + "px"); //这里
			$(".tohome").css("height",hjb51 * 80 / 1080 + "px");
			//]]>	
		</script>
		<script type="text/javascript">
		//<![CDATA[
			//自动刷新调用方法
			function reloadEqu() { 
				var g = document.getElementById("myform:ppcrValue").value;
				var k = document.getElementById("myform:nodpValue").value;
				var m = document.getElementById("myform:equdayValue").value;
				var o = document.getElementById("myform:rcrValue").value;
				
				var gc = g.split(",");
				var hc = (gc[0] + "").split(":");
				var kc = k.split(",");
				var lc = (kc[0] + "").split(":");
				var mc = m.split(",");
				var nc = (mc[0] + "").split(":");
				
				document.getElementById("ppf").innerHTML = hc[1];
				document.getElementById("ppf").style.color=returnColor(parseInt(hc[1]));
				document.getElementById("pit").innerHTML = lc[1];
				document.getElementById("ee").innerHTML = nc[1];
				document.getElementById("ee").style.color=returnColor(parseInt(nc[1]));
				//document.getElementById("rcr").innerHTML = o;
				//document.getElementById("content").innerHTML = "";
			}
			reloadEqu();
			//]]>
		</script>
	</h:form>
	
	<script type="text/javascript">
				setTimeout(function(){
				//document.getElementById("maskw").style.display="none";
				document.getElementById("centerbg").style.display="block";
				$("#maskw").fadeOut(fadeouttime);
				},settimeout);
	</script>
</ui:composition>